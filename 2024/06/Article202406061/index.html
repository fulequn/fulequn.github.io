<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png"><link rel="icon" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Fulequn"><meta name="keywords" content=""><meta name="description" content="1 组件组成部分  1.1 scoped 解决样式冲突 写在组件中的样式会 全局生效 →  因此很容易造成多个组件之间的样式冲突问题。   全局样式: 默认组件中的样式会作用到全局，任何一个组件中都会受到此样式的影响   局部样式: 可以给组件加上scoped 属性,可以让样式只作用于当前组件    scoped 原理  当前组件内标签都被添加 data-v-hash值 的属性 css选择器都被"><meta property="og:type" content="article"><meta property="og:title" content="Vue基础入门到实战4（组件组成部分+组件通信+进阶语法）"><meta property="og:url" content="https://fulequn.github.io/2024/06/Article202406061/index.html"><meta property="og:site_name" content="FuLeQun&#39;s Blog"><meta property="og:description" content="1 组件组成部分  1.1 scoped 解决样式冲突 写在组件中的样式会 全局生效 →  因此很容易造成多个组件之间的样式冲突问题。   全局样式: 默认组件中的样式会作用到全局，任何一个组件中都会受到此样式的影响   局部样式: 可以给组件加上scoped 属性,可以让样式只作用于当前组件    scoped 原理  当前组件内标签都被添加 data-v-hash值 的属性 css选择器都被"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238700.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238701.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238702.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238703.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238704.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238705.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238706.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238707.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238708.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238709.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238710.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238711.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238712.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238713.png"><meta property="article:published_time" content="2024-06-06T08:45:54.000Z"><meta property="article:modified_time" content="2024-06-24T14:39:16.668Z"><meta property="article:author" content="Fulequn"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238700.png"><title>Vue基础入门到实战4（组件组成部分+组件通信+进阶语法） - FuLeQun&#39;s Blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"fulequn.github.io",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:60,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},gtag:null,tajs:null},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 7.2.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>FuLeQun&#39;s Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Vue基础入门到实战4（组件组成部分+组件通信+进阶语法）"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2024-06-06 16:45" pubdate>2024年6月6日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i>4.3k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i>37 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Vue基础入门到实战4（组件组成部分+组件通信+进阶语法）</h1><div class="markdown-body"><h1 id="1-组件组成部分"><a class="markdownIt-Anchor" href="#1-组件组成部分"></a> 1 组件组成部分</h1><h2 id="11-scoped-解决样式冲突"><a class="markdownIt-Anchor" href="#11-scoped-解决样式冲突"></a> 1.1 scoped 解决样式冲突</h2><p>写在组件中的样式会 <strong>全局生效</strong> → 因此很容易造成多个组件之间的样式冲突问题。</p><ol><li><p><strong>全局样式</strong>: 默认组件中的样式会作用到全局，任何一个组件中都会受到此样式的影响</p></li><li><p><strong>局部样式</strong>: 可以给组件加上<strong>scoped</strong> 属性,可以<strong>让样式只作用于当前组件</strong></p></li></ol><h3 id="scoped-原理"><a class="markdownIt-Anchor" href="#scoped-原理"></a> scoped 原理</h3><ol><li>当前组件内标签都被添加 <strong>data-v-hash值</strong> 的属性</li><li>css选择器都被添加 [<strong>data-v-hash值</strong>] 的属性选择器</li></ol><p>最终效果: <strong>必须是当前组件的元素</strong>, 才会有这个自定义属性, 才会被这个样式作用到</p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238700.png" srcset="/img/loading.gif" lazyload alt="68230651737"></p><h2 id="12-data-必须是一个函数"><a class="markdownIt-Anchor" href="#12-data-必须是一个函数"></a> 1.2 data 必须是一个函数</h2><p>一个组件的 <strong>data</strong> 选项必须 <strong>是一个函数</strong>。目的是为了：保证每个组件实例，维护 <strong>独立</strong> 的一份 <strong>数据</strong> 对象。</p><p>每次创建新的组件实例，都会新 <strong>执行一次data 函数</strong>，得到一个新对象。</p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238701.png" srcset="/img/loading.gif" lazyload alt="68230695207"></p><h1 id="2-组件通信"><a class="markdownIt-Anchor" href="#2-组件通信"></a> 2 组件通信</h1><h2 id="21-什么是组件通信"><a class="markdownIt-Anchor" href="#21-什么是组件通信"></a> 2.1 什么是组件通信？</h2><p>组件通信，就是指 <strong>组件与组件</strong> 之间的 <strong>数据传递</strong></p><ul><li>组件的数据是独立的，无法直接访问其他组件的数据。</li><li>想使用其他组件的数据，就需要组件通信</li></ul><h2 id="22-组件之间如何通信"><a class="markdownIt-Anchor" href="#22-组件之间如何通信"></a> 2.2 组件之间如何通信</h2><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238702.png" srcset="/img/loading.gif" lazyload alt="68230890309"></p><h2 id="23-组件关系分类"><a class="markdownIt-Anchor" href="#23-组件关系分类"></a> 2.3 组件关系分类</h2><ol><li>父子关系</li><li>非父子关系</li></ol><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238703.png" srcset="/img/loading.gif" lazyload alt="68231807380"></p><h2 id="24-通信解决方案"><a class="markdownIt-Anchor" href="#24-通信解决方案"></a> 2.4 通信解决方案</h2><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238704.png" srcset="/img/loading.gif" lazyload alt="68231811109"></p><h2 id="25-父子通信流程"><a class="markdownIt-Anchor" href="#25-父子通信流程"></a> 2.5 父子通信流程</h2><ol><li>父组件通过 <strong>props</strong> 将数据传递给子组件</li><li>子组件利用 <strong>$emit</strong> 通知父组件修改更新</li></ol><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238705.png" srcset="/img/loading.gif" lazyload alt="68231844456"></p><h3 id="251-父向子通信代码示例"><a class="markdownIt-Anchor" href="#251-父向子通信代码示例"></a> 2.5.1 父向子通信代码示例</h3><p>父组件通过 <strong>props</strong> 将数据传递给子组件</p><p>父组件App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot; style=&quot;border: 3px solid #000; margin: 10px&quot;&gt;<br>    我是APP组件 <br>    &lt;!-- 1.给组件标签，添加属性方式 赋值 --&gt;<br>    &lt;Son :title=&quot;myTitle&quot;&gt;&lt;/Son&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Son from &#x27;./components/Son.vue&#x27;<br>export default &#123;<br>  name: &#x27;App&#x27;,<br>  data() &#123;<br>    return &#123;<br>      myTitle: &#x27;学前端，就来黑马程序员&#x27;,<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    Son,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>子组件Son.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;son&quot; style=&quot;border:3px solid #000;margin:10px&quot;&gt;<br>    &lt;!-- 3.直接使用props的值 --&gt;<br>    我是Son组件 &#123;&#123;title&#125;&#125;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: &#x27;Son-Child&#x27;,<br>  // 2.通过props来接受<br>  props: [&#x27;title&#x27;],<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238706.png" srcset="/img/loading.gif" lazyload alt="68231871178"></p><p><strong>父向子传值步骤</strong></p><ol><li>给子组件以添加属性的方式传值</li><li>子组件内部通过 props 接收</li><li>模板中直接使用 props接收的值</li></ol><h3 id="252-子向父通信代码示例"><a class="markdownIt-Anchor" href="#252-子向父通信代码示例"></a> 2.5.2 子向父通信代码示例</h3><p>子组件利用 <strong>$emit</strong> 通知父组件，进行修改更新</p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238707.png" srcset="/img/loading.gif" lazyload alt="68231896563"></p><p><strong>子向父传值步骤</strong></p><ol><li>$emit 触发事件，给父组件发送消息通知</li><li>父组件监听 $emit 触发的事件</li><li>提供处理函数，在函数的性参中获取传过来的参数</li></ol><h1 id="3-props"><a class="markdownIt-Anchor" href="#3-props"></a> 3 props</h1><h2 id="31-props-基础"><a class="markdownIt-Anchor" href="#31-props-基础"></a> 3.1 props 基础</h2><p><strong>Props 定义</strong></p><p>组件上注册的一些 <strong>自定义属性</strong></p><p><strong>Props 作用</strong></p><p>向子组件传递数据</p><p><strong>特点</strong></p><ol><li>可以 传递 <strong>任意数量</strong> 的 prop</li><li>可以 传递 <strong>任意类型</strong> 的 prop</li></ol><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238708.png" srcset="/img/loading.gif" lazyload alt="68232015691"></p><p><strong>代码演示</strong></p><p>父组件App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;UserInfo :username=&quot;username&quot; :age=&quot;age&quot; :isSingle=&quot;isSingle&quot; :car=&quot;car&quot; :hobby=&quot;hobby&quot;&gt;<br>    &lt;/UserInfo&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import UserInfo from &#x27;./components/UserInfo.vue&#x27;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      username: &#x27;小帅&#x27;,<br>      age: 28,<br>      isSingle: true,<br>      car: &#123;<br>        brand: &#x27;宝马&#x27;,<br>      &#125;,<br>      hobby: [&#x27;篮球&#x27;, &#x27;足球&#x27;, &#x27;羽毛球&#x27;],<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    UserInfo,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>子组件UserInfo.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;userinfo&quot;&gt;<br>    &lt;h3&gt;我是个人信息组件&lt;/h3&gt;<br>    &lt;div&gt;姓名：&#123;&#123;username&#125;&#125;&lt;/div&gt;<br>    &lt;div&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/div&gt;<br>    &lt;div&gt;是否单身：&#123;&#123;isSingle&#125;&#125;&lt;/div&gt;<br>    &lt;div&gt;座驾：&#123;&#123;car.brand&#125;&#125;&lt;/div&gt;<br>    &lt;div&gt;兴趣爱好：&#123;&#123;hobby.join(&#x27;、&#x27;)&#125;&#125;&lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  props: [&#x27;username&#x27;, &#x27;age&#x27;, &#x27;isSingle&#x27;, &#x27;car&#x27;, &#x27;hobby&#x27;],<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>.userinfo &#123;<br>  width: 300px;<br>  border: 3px solid #000;<br>  padding: 20px;<br>&#125;<br>.userinfo &gt; div &#123;<br>  margin: 20px 10px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h2 id="32-props校验"><a class="markdownIt-Anchor" href="#32-props校验"></a> 3.2 props校验</h2><p>为组件的 prop 指定 <strong>验证要求</strong>，不符合要求，控制台就会有 <strong>错误提示</strong> → 帮助开发者，快速发现错误</p><p><strong>语法</strong></p><ul><li><strong>类型校验</strong></li><li>非空校验</li><li>默认值</li><li>自定义校验</li></ul><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238709.png" srcset="/img/loading.gif" lazyload alt="68232068405"></p><p><strong>4.代码演示</strong></p><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;BaseProgress :w=&quot;width&quot;&gt;&lt;/BaseProgress&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import BaseProgress from &#x27;./components/BaseProgress.vue&#x27;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      width: 30,<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    BaseProgress,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>BaseProgress.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;base-progress&quot;&gt;<br>    &lt;div class=&quot;inner&quot; :style=&quot;&#123; width: w + &#x27;%&#x27; &#125;&quot;&gt;<br>      &lt;span&gt;&#123;&#123; w &#125;&#125;%&lt;/span&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  props: &#123;<br>    w: Number,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.base-progress &#123;<br>  height: 26px;<br>  width: 400px;<br>  border-radius: 15px;<br>  background-color: #272425;<br>  border: 3px solid #272425;<br>  box-sizing: border-box;<br>  margin-bottom: 30px;<br>&#125;<br>.inner &#123;<br>  position: relative;<br>  background: #379bff;<br>  border-radius: 15px;<br>  height: 25px;<br>  box-sizing: border-box;<br>  left: -3px;<br>  top: -2px;<br>&#125;<br>.inner span &#123;<br>  position: absolute;<br>  right: 0;<br>  top: 26px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h2 id="33-props校验完整写法"><a class="markdownIt-Anchor" href="#33-props校验完整写法"></a> 3.3 props校验完整写法</h2><h3 id="331-语法"><a class="markdownIt-Anchor" href="#331-语法"></a> 3.3.1 语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">props: &#123;<br>  校验的属性名: &#123;<br>    type: 类型,  // Number String Boolean ...<br>    required: true, // 是否必填<br>    default: 默认值, // 默认值<br>    validator (value) &#123;<br>      // 自定义校验逻辑<br>      return 是否通过校验<br>    &#125;<br>  &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><h3 id="332-代码实例"><a class="markdownIt-Anchor" href="#332-代码实例"></a> 3.3.2 代码实例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>export default &#123;<br>  // 完整写法（类型、默认值、非空、自定义校验）<br>  props: &#123;<br>    w: &#123;<br>      type: Number,<br>      required: true,<br>      default: 0,<br>      validator(val) &#123;<br>        // console.log(val)<br>        if (val &gt;= 100 || val &lt;= 0) &#123;<br>          console.error(&#x27;传入的范围必须是0-100之间&#x27;)<br>          return false<br>        &#125; else &#123;<br>          return true<br>        &#125;<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="333-注意"><a class="markdownIt-Anchor" href="#333-注意"></a> 3.3.3 注意</h3><p>1.default 和 required 一般不同时写（因为当时必填项时，肯定是有值的）</p><p>2.default 后面如果是简单类型的值，可以直接写默认。如果是复杂类型的值，则需要以函数的形式 return 一个默认值</p><h2 id="34-propsdata-单向数据流"><a class="markdownIt-Anchor" href="#34-propsdata-单向数据流"></a> 3.4 props&amp;data、单向数据流</h2><h3 id="341-共同点"><a class="markdownIt-Anchor" href="#341-共同点"></a> 3.4.1 共同点</h3><p>都可以给组件提供数据</p><h3 id="342-区别"><a class="markdownIt-Anchor" href="#342-区别"></a> 3.4.2 区别</h3><ul><li>data 的数据是 <strong>自己</strong> 的 → 随便改</li><li>prop 的数据是 <strong>外部</strong> 的 → 不能直接改，要遵循 <strong>单向数据流</strong></li></ul><h3 id="343-单向数据流"><a class="markdownIt-Anchor" href="#343-单向数据流"></a> 3.4.3 单向数据流</h3><p>父级 props 的数据更新，会向下流动，影响子组件。这个数据流动是单向的</p><h3 id="4代码演示"><a class="markdownIt-Anchor" href="#4代码演示"></a> 4.代码演示</h3><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;BaseCount :count=&quot;count&quot; @changeCount=&quot;handleChange&quot;&gt;&lt;/BaseCount&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import BaseCount from &#x27;./components/BaseCount.vue&#x27;<br>export default &#123;<br>  components: &#123;<br>    BaseCount,<br>  &#125;,<br>  data() &#123;<br>    return &#123;<br>      count: 100,<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    handleChange(newVal) &#123;<br>      // console.log(newVal);<br>      this.count = newVal<br>    &#125;,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>BaseCount.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;base-count&quot;&gt;<br>    &lt;button @click=&quot;handleSub&quot;&gt;-&lt;/button&gt;<br>    &lt;span&gt;&#123;&#123; count &#125;&#125;&lt;/span&gt;<br>    &lt;button @click=&quot;handleAdd&quot;&gt;+&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  // 1.自己的数据随便修改  （谁的数据 谁负责）<br>  // data () &#123;<br>  //   return &#123;<br>  //     count: 100,<br>  //   &#125;<br>  // &#125;,<br>  // 2.外部传过来的数据 不能随便修改<br>  props: &#123;<br>    count: &#123;<br>      type: Number,<br>    &#125;,<br>  &#125;,<br>  methods: &#123;<br>    handleSub() &#123;<br>      this.$emit(&#x27;changeCount&#x27;, this.count - 1)<br>    &#125;,<br>    handleAdd() &#123;<br>      this.$emit(&#x27;changeCount&#x27;, this.count + 1)<br>    &#125;,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>.base-count &#123;<br>  margin: 20px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238710.png" srcset="/img/loading.gif" lazyload alt="68232373422"></p><h3 id="5口诀"><a class="markdownIt-Anchor" href="#5口诀"></a> 5.口诀</h3><p><strong>谁的数据谁负责</strong></p><h1 id="4-非父子通信"><a class="markdownIt-Anchor" href="#4-非父子通信"></a> 4 非父子通信</h1><h2 id="41-event-bus-事件总线"><a class="markdownIt-Anchor" href="#41-event-bus-事件总线"></a> 4.1 event bus 事件总线</h2><p>非父子组件之间，进行简易消息传递。(复杂场景→ Vuex)</p><p><strong>步骤</strong></p><ol><li><p>创建一个都能访问的事件总线 （空 Vue 实例）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Bus</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>()<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Bus</span><br></code></pre></td></tr></table></figure></li><li><p>A 组件（接受方），监听 Bus 的 $on 事件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">created () &#123;<br>  Bus.$on(&#x27;sendMsg&#x27;, (msg) =&gt; &#123;<br>    this.msg = msg<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>B 组件（发送方），触发 Bus 的 $emit 事件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">Bus.$emit(&#x27;sendMsg&#x27;, &#x27;这是一个消息&#x27;)<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238711.png" srcset="/img/loading.gif" lazyload alt="68232839240"></p></li></ol><p><strong>代码示例</strong></p><p>EventBus.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Bus</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>()<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Bus</span><br></code></pre></td></tr></table></figure><p>BaseA.vue(接受方)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;base-a&quot;&gt;<br>    我是A组件（接受方）<br>    &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Bus from &#x27;../utils/EventBus&#x27;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      msg: &#x27;&#x27;,<br>    &#125;<br>  &#125;,<br>  created() &#123;<br>    // =========== 监听事件 =============<br>    Bus.$on(&#x27;sendMsg&#x27;, (msg) =&gt; &#123;<br>      // console.log(msg)<br>      this.msg = msg<br>    &#125;)<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.base-a &#123;<br>  width: 200px;<br>  height: 200px;<br>  border: 3px solid #000;<br>  border-radius: 3px;<br>  margin: 10px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>BaseB.vue(发送方)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;base-b&quot;&gt;<br>    &lt;div&gt;我是B组件（发布方）&lt;/div&gt;<br>    &lt;button @click=&quot;sendMsgFn&quot;&gt;发送消息&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import Bus from &#x27;../utils/EventBus&#x27;<br>export default &#123;<br>  methods: &#123;<br>    sendMsgFn() &#123;<br>      // ======= 触发事件 =========<br>      Bus.$emit(&#x27;sendMsg&#x27;, &#x27;今天天气不错，适合旅游&#x27;)<br>    &#125;,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.base-b &#123;<br>  width: 200px;<br>  height: 200px;<br>  border: 3px solid #000;<br>  border-radius: 3px;<br>  margin: 10px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;BaseA&gt;&lt;/BaseA&gt;<br>    &lt;BaseB&gt;&lt;/BaseB&gt;<br>    &lt;BaseC&gt;&lt;/BaseC&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import BaseA from &#x27;./components/BaseA.vue&#x27;<br>import BaseB from &#x27;./components/BaseB.vue&#x27;<br>import BaseC from &#x27;./components/BaseC.vue&#x27;<br>export default &#123;<br>  components: &#123;<br>    BaseA,<br>    BaseB,<br>    BaseC,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h2 id="42-provideinject"><a class="markdownIt-Anchor" href="#42-provideinject"></a> 4.2 provide&amp;inject</h2><p>跨层级共享数据</p><h3 id="421-场景"><a class="markdownIt-Anchor" href="#421-场景"></a> 4.2.1 场景</h3><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238712.png" srcset="/img/loading.gif" lazyload alt="68232950551"></p><h3 id="422-语法"><a class="markdownIt-Anchor" href="#422-语法"></a> 4.2.2 语法</h3><ol><li>父组件 provide 提供数据</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  provide () &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>       <span class="hljs-comment">// 普通类型【非响应式】</span><br>       <span class="hljs-attr">color</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span>, <br>       <span class="hljs-comment">// 复杂类型【响应式】</span><br>       <span class="hljs-attr">userInfo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">userInfo</span>, <br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2.子/孙组件 inject 获取数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">inject</span>: [<span class="hljs-string">&#x27;color&#x27;</span>,<span class="hljs-string">&#x27;userInfo&#x27;</span>],<br>  created () &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">userInfo</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="423-注意"><a class="markdownIt-Anchor" href="#423-注意"></a> 4.2.3 注意</h3><ul><li>provide 提供的简单类型的数据不是响应式的，复杂类型数据是响应式。（推荐提供复杂类型数据）</li><li>子/孙组件通过 inject 获取的数据，不能在自身组件内修改</li></ul><h1 id="5-v-model"><a class="markdownIt-Anchor" href="#5-v-model"></a> 5 v-model</h1><h2 id="51-原理"><a class="markdownIt-Anchor" href="#51-原理"></a> 5.1 原理</h2><p>v-model 本质上是一个语法糖。例如应用在输入框上，就是 value 属性和 input 事件的合写</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div id=&quot;app&quot; &gt;<br>    &lt;input v-model=&quot;msg&quot; type=&quot;text&quot;&gt;<br>		&lt;!-- 等价于 --&gt;<br>    &lt;input :value=&quot;msg&quot; @input=&quot;msg = $event.target.value&quot; type=&quot;text&quot;&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br></code></pre></td></tr></table></figure><h3 id="511-作用"><a class="markdownIt-Anchor" href="#511-作用"></a> 5.1.1 作用</h3><p>提供数据的双向绑定</p><ul><li>数据变，视图跟着变 <code>:value</code></li><li>视图变，数据跟着变 <code>@input</code></li></ul><h3 id="512-注意"><a class="markdownIt-Anchor" href="#512-注意"></a> 5.1.2 注意</h3><p><strong>$event</strong> 用于在模板中，获取事件的形参</p><h3 id="513-代码示例"><a class="markdownIt-Anchor" href="#513-代码示例"></a> 5.1.3 代码示例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;input type=&quot;text&quot; v-model=&quot;msg1&quot; /&gt;<br>    &lt;br /&gt;<br>    &lt;!-- v-model的底层其实就是：value和 @input的简写 --&gt;<br>    &lt;input type=&quot;text&quot; :value=&quot;msg2&quot; @input=&quot;msg2 = $event.target.value&quot; /&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      msg1: &#x27;&#x27;,<br>      msg2: &#x27;&#x27;,<br>    &#125;<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h3 id="514-v-model-使用在其他表单元素上的原理"><a class="markdownIt-Anchor" href="#514-v-model-使用在其他表单元素上的原理"></a> 5.1.4 v-model 使用在其他表单元素上的原理</h3><p>不同的表单元素， v-model 在底层的处理机制是不一样的。比如给 checkbox 使用 v-model，底层处理的是 checked 属性和 change 事件。</p><p><strong>不过咱们只需要掌握应用在文本框上的原理即可</strong></p><h2 id="52-表单类组件封装"><a class="markdownIt-Anchor" href="#52-表单类组件封装"></a> 5.2 表单类组件封装</h2><p><strong>需求目标</strong></p><p>实现子组件和父组件数据的双向绑定 （实现App.vue中的selectId和子组件选中的数据进行双向绑定）</p><p><strong>代码演示</strong></p><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;BaseSelect :selectId=&quot;selectId&quot; @changeCity=&quot;selectId = $event&quot;&gt;&lt;/BaseSelect&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import BaseSelect from &#x27;./components/BaseSelect.vue&#x27;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      selectId: &#x27;102&#x27;,<br>    &#125;<br>  &#125;,<br>  components: &#123;<br>    BaseSelect,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>BaseSelect.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;select :value=&quot;selectId&quot; @change=&quot;selectCity&quot;&gt;<br>      &lt;option value=&quot;101&quot;&gt;北京&lt;/option&gt;<br>      &lt;option value=&quot;102&quot;&gt;上海&lt;/option&gt;<br>      &lt;option value=&quot;103&quot;&gt;武汉&lt;/option&gt;<br>      &lt;option value=&quot;104&quot;&gt;广州&lt;/option&gt;<br>      &lt;option value=&quot;105&quot;&gt;深圳&lt;/option&gt;<br>    &lt;/select&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  props: &#123;<br>    selectId: String,<br>  &#125;,<br>  methods: &#123;<br>    selectCity(e) &#123;<br>      this.$emit(&#x27;changeCity&#x27;, e.target.value)<br>    &#125;,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h2 id="53-v-model简化代码"><a class="markdownIt-Anchor" href="#53-v-model简化代码"></a> 5.3 v-model简化代码</h2><h3 id="531-目标"><a class="markdownIt-Anchor" href="#531-目标"></a> 5.3.1 目标</h3><p>父组件通过 v-model <strong>简化代码</strong>，实现子组件和父组件数据 <strong>双向绑定</strong></p><h3 id="532-如何简化"><a class="markdownIt-Anchor" href="#532-如何简化"></a> 5.3.2 如何简化</h3><p>v-model 其实就是 :value 和 @input 事件的简写</p><ul><li>子组件：props 通过 value 接收数据，事件触发 input</li><li>父组件：v-model 直接绑定数据</li></ul><h3 id="533-代码示例"><a class="markdownIt-Anchor" href="#533-代码示例"></a> 5.3.3 代码示例</h3><p>子组件</p><p>这里 props 必须使用 value 这个词，发送时必须使用 input 这个函数名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;select :value=&quot;value&quot; @change=&quot;handleChange&quot;&gt;...&lt;/select&gt;<br>props: &#123;<br>  value: String<br>&#125;,<br>methods: &#123;<br>  handleChange (e) &#123;<br>    this.$emit(&#x27;input&#x27;, e.target.value)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;BaseSelect v-model=&quot;selectId&quot;&gt;&lt;/BaseSelect&gt;<br></code></pre></td></tr></table></figure><h1 id="6-sync修饰符"><a class="markdownIt-Anchor" href="#6-sync修饰符"></a> 6 .sync修饰符</h1><h2 id="61-作用"><a class="markdownIt-Anchor" href="#61-作用"></a> 6.1 作用</h2><p>可以实现 <strong>子组件</strong> 与 <strong>父组件数据</strong> 的 <strong>双向绑定</strong>，简化代码</p><p>简单理解：<strong>子组件可以修改父组件传过来的props值</strong></p><h2 id="62-场景"><a class="markdownIt-Anchor" href="#62-场景"></a> 6.2 场景</h2><p>封装弹框类的基础组件， visible 属性 true 显示 false 隐藏</p><h2 id="63-本质"><a class="markdownIt-Anchor" href="#63-本质"></a> 6.3 本质</h2><p>.sync修饰符 就是 <strong>:属性名</strong> 和 <strong>@update:属性名</strong> 合写</p><h2 id="64-语法"><a class="markdownIt-Anchor" href="#64-语法"></a> 6.4 语法</h2><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">//.sync写法<br>&lt;BaseDialog :visible.sync=&quot;isShow&quot; /&gt;<br>--------------------------------------<br>//完整写法<br>&lt;BaseDialog <br>  :visible=&quot;isShow&quot; <br>  @update:visible=&quot;isShow = $event&quot; <br>/&gt;<br></code></pre></td></tr></table></figure><p>子组件</p><p>名字需要注意，这里需要写 <code>update:数据名</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">props: &#123;<br>  visible: Boolean<br>&#125;,<br><br>this.$emit(&#x27;update:visible&#x27;, false)<br></code></pre></td></tr></table></figure><h2 id="65-代码示例"><a class="markdownIt-Anchor" href="#65-代码示例"></a> 6.5 代码示例</h2><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;button @click=&quot;openDialog&quot;&gt;退出按钮&lt;/button&gt;<br>    &lt;!-- isShow.sync  =&gt; :isShow=&quot;isShow&quot; @update:isShow=&quot;isShow=$event&quot; --&gt;<br>    &lt;BaseDialog :isShow.sync=&quot;isShow&quot;&gt;&lt;/BaseDialog&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import BaseDialog from &#x27;./components/BaseDialog.vue&#x27;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      isShow: false,<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    openDialog() &#123;<br>      this.isShow = true<br>      // console.log(document.querySelectorAll(&#x27;.box&#x27;));<br>    &#125;,<br>  &#125;,<br>  components: &#123;<br>    BaseDialog,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>BaseDialog.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;base-dialog-wrap&quot; v-show=&quot;isShow&quot;&gt;<br>    &lt;div class=&quot;base-dialog&quot;&gt;<br>      &lt;div class=&quot;title&quot;&gt;<br>        &lt;h3&gt;温馨提示：&lt;/h3&gt;<br>        &lt;button class=&quot;close&quot; @click=&quot;closeDialog&quot;&gt;x&lt;/button&gt;<br>      &lt;/div&gt;<br>      &lt;div class=&quot;content&quot;&gt;<br>        &lt;p&gt;你确认要退出本系统么？&lt;/p&gt;<br>      &lt;/div&gt;<br>      &lt;div class=&quot;footer&quot;&gt;<br>        &lt;button&gt;确认&lt;/button&gt;<br>        &lt;button&gt;取消&lt;/button&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  props: &#123;<br>    isShow: Boolean,<br>  &#125;,<br>  methods: &#123;<br>    closeDialog() &#123;<br>      this.$emit(&#x27;update:isShow&#x27;, false)<br>    &#125;,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.base-dialog-wrap &#123;<br>  width: 300px;<br>  height: 200px;<br>  box-shadow: 2px 2px 2px 2px #ccc;<br>  position: fixed;<br>  left: 50%;<br>  top: 50%;<br>  transform: translate(-50%, -50%);<br>  padding: 0 10px;<br>&#125;<br>.base-dialog .title &#123;<br>  display: flex;<br>  justify-content: space-between;<br>  align-items: center;<br>  border-bottom: 2px solid #000;<br>&#125;<br>.base-dialog .content &#123;<br>  margin-top: 38px;<br>&#125;<br>.base-dialog .title .close &#123;<br>  width: 20px;<br>  height: 20px;<br>  cursor: pointer;<br>  line-height: 10px;<br>&#125;<br>.footer &#123;<br>  display: flex;<br>  justify-content: flex-end;<br>  margin-top: 26px;<br>&#125;<br>.footer button &#123;<br>  width: 80px;<br>  height: 40px;<br>&#125;<br>.footer button:nth-child(1) &#123;<br>  margin-right: 10px;<br>  cursor: pointer;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h1 id="7-ref和refs"><a class="markdownIt-Anchor" href="#7-ref和refs"></a> 7 ref和$refs</h1><h2 id="71-作用"><a class="markdownIt-Anchor" href="#71-作用"></a> 7.1 作用</h2><p>利用ref 和 $refs 可以用于 获取 dom 元素 或 组件实例</p><h2 id="72-特点"><a class="markdownIt-Anchor" href="#72-特点"></a> 7.2 特点</h2><p>查找范围 → 当前组件内(更精确稳定)</p><h2 id="73-语法"><a class="markdownIt-Anchor" href="#73-语法"></a> 7.3 语法</h2><p>1.给要获取的盒子添加 ref 属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;chartRef&quot;</span>&gt;</span>我是渲染图表的容器<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.获取时通过 $refs 获取 <code>this.\$refs.chartRef</code> 获取</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">mounted () &#123;<br>  console.log(this.$refs.chartRef)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="74-注意"><a class="markdownIt-Anchor" href="#74-注意"></a> 7.4 注意</h2><p>之前只用document.querySelect(‘.box’) 获取的是整个页面中的盒子。如果遇到同名的元素，就无法区分。</p><h2 id="75-代码示例"><a class="markdownIt-Anchor" href="#75-代码示例"></a> 7.5 代码示例</h2><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;div class=&quot;base-chart-box&quot;&gt;<br>      这是一个捣乱的盒子<br>    &lt;/div&gt;<br>    &lt;BaseChart&gt;&lt;/BaseChart&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import BaseChart from &#x27;./components/BaseChart.vue&#x27;<br>export default &#123;<br>  components: &#123;<br>    BaseChart,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>.base-chart-box &#123;<br>  width: 300px;<br>  height: 200px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>BaseChart.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;base-chart-box&quot; ref=&quot;baseChartBox&quot;&gt;子组件&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import * as echarts from &#x27;echarts&#x27;<br><br>export default &#123;<br>  mounted() &#123;<br>    // 基于准备好的dom，初始化echarts实例<br>    // document.querySelector 会查找项目中所有的元素<br>    // $refs只会在当前组件查找盒子<br>    // var myChart = echarts.init(document.querySelector(&#x27;.base-chart-box&#x27;))<br>    var myChart = echarts.init(this.$refs.baseChartBox)<br>    // 绘制图表<br>    myChart.setOption(&#123;<br>      title: &#123;<br>        text: &#x27;ECharts 入门示例&#x27;,<br>      &#125;,<br>      tooltip: &#123;&#125;,<br>      xAxis: &#123;<br>        data: [&#x27;衬衫&#x27;, &#x27;羊毛衫&#x27;, &#x27;雪纺衫&#x27;, &#x27;裤子&#x27;, &#x27;高跟鞋&#x27;, &#x27;袜子&#x27;],<br>      &#125;,<br>      yAxis: &#123;&#125;,<br>      series: [<br>        &#123;<br>          name: &#x27;销量&#x27;,<br>          type: &#x27;bar&#x27;,<br>          data: [5, 20, 36, 10, 10, 20],<br>        &#125;,<br>      ],<br>    &#125;)<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.base-chart-box &#123;<br>  width: 400px;<br>  height: 300px;<br>  border: 3px solid #000;<br>  border-radius: 6px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h1 id="8-异步更新-nexttick"><a class="markdownIt-Anchor" href="#8-异步更新-nexttick"></a> 8 异步更新 &amp; $nextTick</h1><h2 id="81-需求"><a class="markdownIt-Anchor" href="#81-需求"></a> 8.1 需求</h2><p>编辑标题, 编辑框自动聚焦</p><ol><li>点击编辑，显示编辑框</li><li>让编辑框，立刻获取焦点</li></ol><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242238713.png" srcset="/img/loading.gif" lazyload alt="68239449534"></p><h2 id="82-代码实现"><a class="markdownIt-Anchor" href="#82-代码实现"></a> 8.2 代码实现</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;div v-if=&quot;isShowEdit&quot;&gt;<br>      &lt;input type=&quot;text&quot; v-model=&quot;editValue&quot; ref=&quot;inp&quot; /&gt;<br>      &lt;button&gt;确认&lt;/button&gt;<br>    &lt;/div&gt;<br>    &lt;div v-else&gt;<br>      &lt;span&gt;&#123;&#123; title &#125;&#125;&lt;/span&gt;<br>      &lt;button @click=&quot;editFn&quot;&gt;编辑&lt;/button&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  data() &#123;<br>    return &#123;<br>      title: &#x27;大标题&#x27;,<br>      isShowEdit: false,<br>      editValue: &#x27;&#x27;,<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    editFn() &#123;<br>      // 1.显示文本框<br>      this.isShowEdit = true<br>      // 2.让文本框聚焦 （会等dom更新完之后 立马执行nextTick中的回调函数）<br>      // this.$nextTick(() =&gt; &#123;<br>      //   console.log(this.$refs.inp)<br>      //   this.$refs.inp.focus()<br>      // &#125;)<br><br>      setTimeout(() =&gt; &#123;<br>        this.$refs.inp.focus()<br>      &#125;, 0)<br>    &#125;,<br>  &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h3 id="83-问题"><a class="markdownIt-Anchor" href="#83-问题"></a> 8.3 问题</h3><p>“显示之后”，立刻获取焦点是不能成功的！</p><p>原因：Vue 是异步更新DOM (提升性能)</p><h2 id="84-解决方案"><a class="markdownIt-Anchor" href="#84-解决方案"></a> 8.4 解决方案</h2><p>$nextTick：<strong>等 DOM更新后</strong>,才会触发执行此方法里的函数体</p><p><strong>语法:</strong> this.$nextTick(函数体)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">inp</span>.<span class="hljs-title function_">focus</span>()<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>注意：</strong>$nextTick 内的函数体 一定是<strong>箭头函数</strong>，这样才能让函数内部的 this 指向 Vue 实例。</p></div><hr><div><div class="post-metas my-3"></div><div class="license-box my-3"><div class="license-title"><div>Vue基础入门到实战4（组件组成部分+组件通信+进阶语法）</div><div>https://fulequn.github.io/2024/06/Article202406061/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Fulequn</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2024年6月6日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2024/06/Article202406071/" title="Vue基础入门到实战5（自定义指令+插槽+路由入门）"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Vue基础入门到实战5（自定义指令+插槽+路由入门）</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2024/06/Article202406051/" title="Vue基础入门到实战3（生命周期+工程化开发+组件化开发）"><span class="hidden-mobile">Vue基础入门到实战3（生命周期+工程化开发+组件化开发）</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>