<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png"><link rel="icon" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Fulequn"><meta name="keywords" content=""><meta name="description" content="1 Vuex 概述  1.1 介绍 Vuex 是一个 Vue 的 状态管理工具，状态就是数据。 大白话：Vuex 是一个插件，可以帮我们管理 Vue 通用的数据 (多组件共享的数据)。例如：购物车数据   个人信息数  1.1.1 使用场景   某个状态 在 很多个组件 来使用 (个人信息)   多个组件 共同维护 一份数据 (购物车)     1.1.2 优势  共同维护一份数据，数据集中化管"><meta property="og:type" content="article"><meta property="og:title" content="Vue基础入门到实战6（路由进阶+面经项目）"><meta property="og:url" content="https://fulequn.github.io/2024/06/Article202406141/index.html"><meta property="og:site_name" content="FuLeQun&#39;s Blog"><meta property="og:description" content="1 Vuex 概述  1.1 介绍 Vuex 是一个 Vue 的 状态管理工具，状态就是数据。 大白话：Vuex 是一个插件，可以帮我们管理 Vue 通用的数据 (多组件共享的数据)。例如：购物车数据   个人信息数  1.1.1 使用场景   某个状态 在 很多个组件 来使用 (个人信息)   多个组件 共同维护 一份数据 (购物车)     1.1.2 优势  共同维护一份数据，数据集中化管"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247306.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247307.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247308.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247309.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247310.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247311.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247312.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247313.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247314.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247315.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247316.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247317.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247318.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247319.png"><meta property="article:published_time" content="2024-06-11T07:32:21.000Z"><meta property="article:modified_time" content="2024-06-24T14:50:12.714Z"><meta property="article:author" content="Fulequn"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247306.png"><title>Vue基础入门到实战6（路由进阶+面经项目） - FuLeQun&#39;s Blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"fulequn.github.io",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:60,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},gtag:null,tajs:null},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 7.2.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>FuLeQun&#39;s Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Vue基础入门到实战6（路由进阶+面经项目）"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2024-06-11 15:32" pubdate>2024年6月11日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i>3.4k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i>29 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Vue基础入门到实战6（路由进阶+面经项目）</h1><div class="markdown-body"><h1 id="1-vuex-概述"><a class="markdownIt-Anchor" href="#1-vuex-概述"></a> 1 Vuex 概述</h1><h2 id="11-介绍"><a class="markdownIt-Anchor" href="#11-介绍"></a> 1.1 介绍</h2><p>Vuex 是一个 Vue 的 状态管理工具，状态就是数据。</p><p>大白话：Vuex 是一个插件，可以帮我们管理 Vue 通用的数据 (多组件共享的数据)。例如：购物车数据 个人信息数</p><h3 id="111-使用场景"><a class="markdownIt-Anchor" href="#111-使用场景"></a> 1.1.1 使用场景</h3><ul><li><p>某个状态 在 很多个组件 来使用 (个人信息)</p></li><li><p>多个组件 共同维护 一份数据 (购物车)</p></li></ul><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247306.png" srcset="/img/loading.gif" lazyload alt="68317818664"></p><h3 id="112-优势"><a class="markdownIt-Anchor" href="#112-优势"></a> 1.1.2 优势</h3><ul><li>共同维护一份数据，<strong>数据集中化管理</strong></li><li><strong>响应式变化</strong></li><li>操作简洁 (vuex 提供了一些辅助函数)</li></ul><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247307.png" srcset="/img/loading.gif" lazyload alt="68317829336"></p><h3 id="113-注意"><a class="markdownIt-Anchor" href="#113-注意"></a> 1.1.3 注意</h3><p>官方原文：</p><ul><li>不是所有的场景都适用于 vuex，只有在必要的时候才使用 vuex</li><li>使用了 vuex 之后，会附加更多的框架中的概念进来，增加了项目的复杂度 （数据的操作更便捷，数据的流动更清晰）</li></ul><h2 id="12-vuex-的使用"><a class="markdownIt-Anchor" href="#12-vuex-的使用"></a> 1.2 vuex 的使用</h2><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247308.png" srcset="/img/loading.gif" lazyload alt="68321278417"></p><h3 id="121-安装-vuex"><a class="markdownIt-Anchor" href="#121-安装-vuex"></a> 1.2.1 安装 vuex</h3><p>安装 vuex 与 vue-router 类似，vuex 是一个独立存在的插件，如果脚手架初始化没有选 vuex，就需要额外安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 233 344 vue2 对应的是 vuex3</span><br>yarn add vuex@3 或者 npm i vuex@3<br></code></pre></td></tr></table></figure><h3 id="122-storeindexjs-专门存放-vuex"><a class="markdownIt-Anchor" href="#122-storeindexjs-专门存放-vuex"></a> 1.2.2 store/index.js 专门存放 vuex</h3><p>为了维护项目目录的整洁，在 src 目录下新建一个 store 目录其下放置一个 index.js 文件。 (和 <code>router/index.js</code> 类似)</p><p>​	<img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247309.png" srcset="/img/loading.gif" lazyload alt="68321280582"></p><h3 id="123-创建仓库-storeindexjs"><a class="markdownIt-Anchor" href="#123-创建仓库-storeindexjs"></a> 1.2.3 创建仓库 store/index.js</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 导入 vue</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-comment">// 导入 vuex</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-comment">// vuex 也是 vue 的插件, 需要 use 一下, 进行插件的安装初始化</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)<br><br><span class="hljs-comment">// 创建仓库 store</span><br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>()<br><span class="hljs-comment">// 导出仓库</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store<br></code></pre></td></tr></table></figure><h3 id="124-在-mainjs-中导入挂载到-vue-实例上"><a class="markdownIt-Anchor" href="#124-在-mainjs-中导入挂载到-vue-实例上"></a> 1.2.4 在 main.js 中导入挂载到 Vue 实例上</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>  store<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><p>此刻起, 就成功创建了一个 <strong>空仓库!!</strong></p><h3 id="125-测试打印-vuex"><a class="markdownIt-Anchor" href="#125-测试打印-vuex"></a> 1.2.5 测试打印 Vuex</h3><p>App.vue</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">created</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="2-核心概念"><a class="markdownIt-Anchor" href="#2-核心概念"></a> 2 核心概念</h1><h2 id="21-状态-state"><a class="markdownIt-Anchor" href="#21-状态-state"></a> 2.1 状态 state</h2><h3 id="211-单一状态树"><a class="markdownIt-Anchor" href="#211-单一状态树"></a> 2.1.1 单一状态树</h3><p>明确如何给仓库 提供 数据，如何 使用 仓库的数据</p><p><strong>1.提供数据</strong></p><p>State 提供唯一的公共数据源，所有共享的数据都要统一放到 Store 中的 State 中存储。</p><p>打开项目中的 store.js 文件，在 state 对象中可以添加我们要共享的数据。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 创建仓库 store</span><br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>  <span class="hljs-comment">// state 状态, 即数据, 类似于 vue 组件中的 data,</span><br>  <span class="hljs-comment">// 区别：</span><br>  <span class="hljs-comment">// 1.data 是组件自己的数据, </span><br>  <span class="hljs-comment">// 2.state 中的数据整个 vue 项目的组件都能访问到</span><br>  <span class="hljs-attr">state</span>: &#123;<br>    <span class="hljs-attr">count</span>: <span class="hljs-number">101</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>2.访问 Vuex 中的数据</strong></p><ol><li>通过 $store 直接访问 —&gt; <code>&#123;&#123; $store.state.count &#125;&#125;</code></li><li>通过辅助函数 mapState 映射计算属性 —&gt; <code>&#123;&#123; count &#125;&#125;</code></li></ol><p><strong>3.通过 $store 访问的语法</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">获取 store：<br> <span class="hljs-number">1.</span><span class="hljs-title class_">Vue</span> 模板中获取 <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span><br> <span class="hljs-number">2.</span>js 文件中获取 <span class="hljs-keyword">import</span> 导入 store<br><br><br>模板（没有 <span class="hljs-variable language_">this</span>）中：     &#123;&#123; $store.<span class="hljs-property">state</span>.<span class="hljs-property">xxx</span> &#125;&#125;<br>组件逻辑中：  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">xxx</span><br><span class="hljs-variable constant_">JS</span>模块中：   store.<span class="hljs-property">state</span>.<span class="hljs-property">xxx</span><br></code></pre></td></tr></table></figure><p><strong>4.代码实现</strong></p><p><strong>模板中使用</strong></p><p>组件中可以使用 <strong>$store</strong> 获取到 vuex 中的 store 对象实例，可通过 <strong>state</strong> 属性属性获取 <strong>count</strong>， 如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h1&gt;state的数据 - &#123;&#123; $store.state.count &#125;&#125;&lt;/h1&gt;<br></code></pre></td></tr></table></figure><p><strong>组件逻辑中使用</strong></p><p>将 state 属性定义在计算属性中 <a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/guide/state.html">https://vuex.vuejs.org/zh/guide/state.html</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;h1&gt;state的数据 - &#123;&#123; count &#125;&#125;&lt;/h1&gt;<br><br><span class="hljs-comment">// 把state中数据，定义在组件内的计算属性中</span><br>  <span class="hljs-attr">computed</span>: &#123;<br>    count () &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span><br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p><strong>js 文件中使用</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//main.js</span><br><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/store&quot;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(store.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>)<br></code></pre></td></tr></table></figure><p>每次都像这样一个个的提供计算属性, 太麻烦了,我们有没有简单的语法帮我们获取state中的值呢？</p><h3 id="212-辅助函数-mapstate"><a class="markdownIt-Anchor" href="#212-辅助函数-mapstate"></a> 2.1.2 辅助函数 mapState</h3><blockquote><p>mapState 是辅助函数，帮助我们把 store 中的数据映射到组件的计算属性中, 它属于一种方便的用法</p></blockquote><p>用法 ：</p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247310.png" srcset="/img/loading.gif" lazyload alt="68321471957"></p><p><strong>1.导入 mapState (mapState 是 vuex 中的一个函数)</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; mapState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>2.采用数组形式引入 state 属性</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">mapState</span>([<span class="hljs-string">&#x27;count&#x27;</span>]) <br></code></pre></td></tr></table></figure><blockquote><p>上面代码的最终得到的是 <strong>类似于</strong> 计算属性添加了对应的数据</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">count () &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3.利用展开运算符将导出的状态映射给计算属性</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">computed</span>: &#123;<br>  ...<span class="hljs-title function_">mapState</span>([<span class="hljs-string">&#x27;count&#x27;</span>])<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div&gt; state的数据：&#123;&#123; count &#125;&#125;&lt;/div&gt;<br></code></pre></td></tr></table></figure><h2 id="22-开启严格模式及-vuex-的单向数据流"><a class="markdownIt-Anchor" href="#22-开启严格模式及-vuex-的单向数据流"></a> 2.2 开启严格模式及 Vuex 的单向数据流</h2><p>明确 vuex 同样遵循单向数据流，组件中不能直接修改仓库的数据</p><p><strong>直接在组件中修改Vuex中state的值</strong></p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247311.png" srcset="/img/loading.gif" lazyload alt="68321589228"></p><p>Son1.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">button @click=<span class="hljs-string">&quot;handleAdd&quot;</span>&gt;值 + <span class="hljs-number">1</span>&lt;/button&gt;<br><br><br><span class="hljs-attr">methods</span>:&#123;<br>	 handleAdd (n) &#123;<br>      <span class="hljs-comment">// 错误代码(vue默认不会监测，监测需要成本)</span><br>       <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>++<br>      <span class="hljs-comment">// console.log(this.$store.state.count) </span><br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>开启严格模式</strong></p><p>通过 <code>strict: true</code> 可以开启严格模式,开启严格模式后，直接修改 state 中的值会报错</p><blockquote><p><strong>state 数据的修改只能通过 mutations，并且 mutations 必须是同步的</strong></p></blockquote><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247312.png" srcset="/img/loading.gif" lazyload alt="68321471957"></p><h2 id="23-mutation"><a class="markdownIt-Anchor" href="#23-mutation"></a> 2.3 Mutation</h2><h3 id="231-介绍"><a class="markdownIt-Anchor" href="#231-介绍"></a> 2.3.1 介绍</h3><p><strong>1.定义 mutations</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> store  = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>  <span class="hljs-attr">state</span>: &#123;<br>    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>  &#125;,<br>  <span class="hljs-comment">// 定义mutations</span><br>  <span class="hljs-attr">mutations</span>: &#123;<br>     <br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>2.格式说明</strong></p><p>mutations 是一个对象，对象中存放修改state的方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">mutations</span>: &#123;<br>    <span class="hljs-comment">// 方法里参数 第一个参数是当前store的state属性</span><br>    <span class="hljs-comment">// payload 载荷 运输参数 调用mutaiions的时候 可以传递参数 传递载荷</span><br>    addCount (state) &#123;<br>      state.<span class="hljs-property">count</span> += <span class="hljs-number">1</span><br>    &#125;<br>  &#125;,<br></code></pre></td></tr></table></figure><p><strong>3.组件中提交 mutations</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;addCount&#x27;</span>)<br></code></pre></td></tr></table></figure><p><strong>4.总结</strong></p><p>通过 mutations 修改 state 的步骤</p><p>1.定义 mutations 对象，对象中存放修改 state 的方法</p><p>2.组件中提交调用 mutations(通过 $store.commit(‘mutations的方法名’))</p><h3 id="232-提交载荷payload"><a class="markdownIt-Anchor" href="#232-提交载荷payload"></a> 2.3.2 提交载荷（Payload）</h3><p>可以向 <code>store.commit</code> 传入额外的参数，即 mutation 的<strong>载荷（payload）</strong></p><p><strong>语法</strong></p><p>看下面这个案例，每次点击不同的按钮，加的值都不同，每次都要定义不同的mutations处理吗？</p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247313.png" srcset="/img/loading.gif" lazyload alt="68321700423"></p><p>提交 mutation 是可以传递参数的 <code>this.$store.commit('xxx', 参数)</code></p><p><strong>2.1 提供mutation函数（带参数）</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">mutations</span>: &#123;<br>  ...<br>  addCount (state, count) &#123;<br>    state.<span class="hljs-property">count</span> = count<br>  &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><p><strong>2.2 提交mutation</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">handle ( ) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;addCount&#x27;</span>, <span class="hljs-number">10</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>小tips: 提交的参数只能是一个, 如果有多个参数要传, 可以传递一个对象</strong>。</p><p>在大多数情况下，载荷应该是一个对象，这样可以包含多个字段并且记录的 mutation 会更易读</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;addCount&#x27;</span>, &#123;<br>  <span class="hljs-attr">count</span>: <span class="hljs-number">10</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="233-mapmutations"><a class="markdownIt-Anchor" href="#233-mapmutations"></a> 2.3.3 mapMutations</h3><blockquote><p>mapMutations 和 mapState 很像，它把位于 mutations 中的方法提取了出来，我们可以将它导入</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span>  &#123; mapMutations &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-attr">methods</span>: &#123;<br>    ...<span class="hljs-title function_">mapMutations</span>([<span class="hljs-string">&#x27;addCount&#x27;</span>])<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>上面代码的含义是将 mutations 的方法导入了 methods 中，等价于</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">methods</span>: &#123;<br>      <span class="hljs-comment">// commit(方法名, 载荷参数)</span><br>      addCount () &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;addCount&#x27;</span>)<br>      &#125;<br> &#125;<br></code></pre></td></tr></table></figure><p>此时，就可以直接通过 this.addCount 调用了</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;button @click=<span class="hljs-string">&quot;addCount&quot;</span>&gt;值+<span class="hljs-number">1</span>&lt;/button&gt;<br></code></pre></td></tr></table></figure><p>但是请注意： Vuex 中 mutations 中要求不能写异步代码，如果有异步的 ajax 请求，应该放置在 actions 中。</p><h2 id="24-action"><a class="markdownIt-Anchor" href="#24-action"></a> 2.4 Action</h2><blockquote><p>state 是存放数据的，mutations 是同步更新数据 (便于监测数据的变化, 更新视图等, 方便于调试工具查看变化)，</p><p>actions 则负责进行异步操作</p></blockquote><p><strong>说明：mutations 必须是同步的</strong></p><p><strong>需求: 一秒钟之后，要给一个数去修改 state</strong></p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247314.png" srcset="/img/loading.gif" lazyload alt="68321860367"></p><p><strong>1.定义 actions</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">mutations</span>: &#123;<br>  changeCount (state, newCount) &#123;<br>    state.<span class="hljs-property">count</span> = newCount<br>  &#125;<br>&#125;<br><br><br><span class="hljs-attr">actions</span>: &#123;<br>  setAsyncCount (context, num) &#123;<br>    <span class="hljs-comment">// 一秒后, 给一个数, 去修改 num</span><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;changeCount&#x27;</span>, num)<br>    &#125;, <span class="hljs-number">1000</span>)<br>  &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><p><strong>2.组件中通过 dispatch 调用</strong></p><p>Action 通过 <code>store.dispatch</code> 方法触发：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&#x27;increment&#x27;</span>)<br></code></pre></td></tr></table></figure><p>如下：</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haxe">setAsyncCount () &#123;<br>  <span class="hljs-built_in">this</span>.<span class="hljs-variable">$store</span>.dispatch(<span class="hljs-string">&#x27;setAsyncCount&#x27;</span>, <span class="hljs-number">666</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247315.png" srcset="/img/loading.gif" lazyload alt="68344198757"></p><h3 id="241-mapactions"><a class="markdownIt-Anchor" href="#241-mapactions"></a> 2.4.1 mapActions</h3><p>1.目标：掌握辅助函数 mapActions，映射方法</p><blockquote><p>mapActions 是把位于 actions 中的方法提取了出来，映射到组件 methods 中</p></blockquote><p>Son2.vue</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; mapActions &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-attr">methods</span>: &#123;<br>   ...<span class="hljs-title function_">mapActions</span>([<span class="hljs-string">&#x27;changeCountAction&#x27;</span>])<br>&#125;<br><br><span class="hljs-comment">//mapActions映射的代码 本质上是以下代码的写法</span><br><span class="hljs-comment">//methods: &#123;</span><br><span class="hljs-comment">//  changeCountAction (n) &#123;</span><br><span class="hljs-comment">//    this.$store.dispatch(&#x27;changeCountAction&#x27;, n)</span><br><span class="hljs-comment">//  &#125;,</span><br><span class="hljs-comment">//&#125;</span><br></code></pre></td></tr></table></figure><p>直接通过 this.方法 就可以调用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;button @click=&quot;changeCountAction(200)&quot;&gt;+异步&lt;/button&gt;<br></code></pre></td></tr></table></figure><h2 id="25-getter"><a class="markdownIt-Anchor" href="#25-getter"></a> 2.5 Getter</h2><blockquote><p>除了 state 之外，有时我们还需要从 state 中<strong>筛选出符合条件的一些数据</strong>，这些数据是依赖 state 的，此时会用到 getters</p></blockquote><p>例如，state 中定义了 list，为 1-10 的数组，</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">state</span>: &#123;<br>    <span class="hljs-attr">list</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]<br>&#125;<br></code></pre></td></tr></table></figure><p>组件中，需要显示所有大于 5 的数据，正常的方式，是需要 list 在组件中进行再一步的处理，但是 getters 可以帮助我们实现它</p><h3 id="251-定义-getters"><a class="markdownIt-Anchor" href="#251-定义-getters"></a> 2.5.1 定义 getters</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">getters</span>: &#123;<br>   <span class="hljs-comment">// getters 函数的第一个参数是 state</span><br>   <span class="hljs-comment">// 必须要有返回值</span><br>   <span class="hljs-attr">filterList</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">list</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item &gt; <span class="hljs-number">5</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="252-使用-getters"><a class="markdownIt-Anchor" href="#252-使用-getters"></a> 2.5.2 使用 getters</h3><p><strong>原始方式-$store</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div&gt;&#123;&#123; $store.getters.filterList &#125;&#125;&lt;/div&gt;<br></code></pre></td></tr></table></figure><p><strong>辅助函数 - mapGetters</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">computed</span>: &#123;<br>    ...<span class="hljs-title function_">mapGetters</span>([<span class="hljs-string">&#x27;filterList&#x27;</span>])<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;div&gt;&#123;&#123; filterList &#125;&#125;&lt;/div&gt;<br></code></pre></td></tr></table></figure><h2 id="26-使用小结"><a class="markdownIt-Anchor" href="#26-使用小结"></a> 2.6 使用小结</h2><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247316.png" srcset="/img/loading.gif" lazyload alt="68344213391"></p><h2 id="27-module"><a class="markdownIt-Anchor" href="#27-module"></a> 2.7 Module</h2><p>由于使用 <strong>单一状态树</strong>，应用的所有状态 <strong>会集中到一个比较大的对象</strong>。当应用变得非常复杂时，store 对象就有可能变得相当臃肿。</p><p>这句话的意思是，如果把所有的状态都放在 state 中，当项目变得越来越大的时候，Vuex 会变得越来越难以维护</p><p>由此，又有了 Vuex 的模块化。</p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247317.png" srcset="/img/loading.gif" lazyload alt="68342575835"></p><p><strong>准备 state</strong></p><p>定义两个模块 <strong>user</strong> 和 <strong>setting</strong></p><p>user中管理用户的信息状态 userInfo <code>modules/user.js</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> state = &#123;<br>  <span class="hljs-attr">userInfo</span>: &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zs&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> mutations = &#123;&#125;<br><br><span class="hljs-keyword">const</span> actions = &#123;&#125;<br><br><span class="hljs-keyword">const</span> getters = &#123;&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  state,<br>  mutations,<br>  actions,<br>  getters<br>&#125;<br></code></pre></td></tr></table></figure><p>setting 中管理项目应用的，主题色 theme，描述 desc， <code>modules/setting.js</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> state = &#123;<br>  <span class="hljs-attr">theme</span>: <span class="hljs-string">&#x27;dark&#x27;</span><br>  <span class="hljs-attr">desc</span>: <span class="hljs-string">&#x27;描述真呀真不错&#x27;</span><br>&#125;<br><br><span class="hljs-keyword">const</span> mutations = &#123;&#125;<br><br><span class="hljs-keyword">const</span> actions = &#123;&#125;<br><br><span class="hljs-keyword">const</span> getters = &#123;&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  state,<br>  mutations,<br>  actions,<br>  getters<br>&#125;<br></code></pre></td></tr></table></figure><p>在 <code>store/index.js</code> 文件中的 modules 配置项中，注册这两个模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> user <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./modules/user&#x27;</span><br><span class="hljs-keyword">import</span> setting <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./modules/setting&#x27;</span><br><br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>    <span class="hljs-attr">modules</span>:&#123;<br>        user,<br>        setting<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>使用模块中的数据, 可以直接通过模块名访问 <code>$store.state.模块名.xxx</code> =&gt; <code>$store.state.setting.desc</code></p><p>也可以通过 mapState 映射。</p><h1 id="3-项目化-获取模块内信息"><a class="markdownIt-Anchor" href="#3-项目化-获取模块内信息"></a> 3 项目化-获取模块内信息</h1><h2 id="31-获取模块内的-state-数据"><a class="markdownIt-Anchor" href="#31-获取模块内的-state-数据"></a> 3.1 获取模块内的 state 数据</h2><p>尽管已经分模块了，但其实子模块的状态，还是会挂到根级别的 state 中，属性名就是模块名。</p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247318.png" srcset="/img/loading.gif" lazyload alt="68342784166"></p><p><strong>使用模块中的数据</strong></p><ol><li>直接通过模块名访问 <code>$store.state.模块名.xxx</code></li><li>通过 mapState 映射：<ol><li>默认根级别的映射： <code>mapState([ 'xxx' ])</code></li><li>子模块的映射：<code>mapState('模块名', ['xxx'])</code> - 需要开启命名空间 <strong>namespaced:true</strong></li></ol></li></ol><p><code>modules/user.js</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> state = &#123;<br>  <span class="hljs-attr">userInfo</span>: &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zs&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span><br>  &#125;,<br>  <span class="hljs-attr">myMsg</span>: <span class="hljs-string">&#x27;我的数据&#x27;</span><br>&#125;<br><br><span class="hljs-keyword">const</span> mutations = &#123;<br>  updateMsg (state, msg) &#123;<br>    state.<span class="hljs-property">myMsg</span> = msg<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> actions = &#123;&#125;<br><br><span class="hljs-keyword">const</span> getters = &#123;&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,<br>  state,<br>  mutations,<br>  actions,<br>  getters<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>代码示例</strong></p><p>$store 直接访问</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$store.<span class="hljs-property">state</span>.<span class="hljs-property">user</span>.<span class="hljs-property">userInfo</span>.<span class="hljs-property">name</span><br></code></pre></td></tr></table></figure><p>mapState 辅助函数访问</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">...<span class="hljs-title function_">mapState</span>(<span class="hljs-string">&#x27;user&#x27;</span>, [<span class="hljs-string">&#x27;userInfo&#x27;</span>]),<br>...<span class="hljs-title function_">mapState</span>(<span class="hljs-string">&#x27;setting&#x27;</span>, [<span class="hljs-string">&#x27;theme&#x27;</span>, <span class="hljs-string">&#x27;desc&#x27;</span>]),<br></code></pre></td></tr></table></figure><h2 id="32-获取模块内的-getters-数据"><a class="markdownIt-Anchor" href="#32-获取模块内的-getters-数据"></a> 3.2 获取模块内的 getters 数据</h2><p>使用模块中 getters 中的数据：</p><ol><li>直接通过模块名访问 <code>$store.getters['模块名/xxx ']</code></li><li>通过 mapGetters 映射<ol><li>默认根级别的映射 <code>mapGetters([ 'xxx' ])</code></li><li>子模块的映射 <code>mapGetters('模块名', ['xxx'])</code> - 需要开启命名空间</li></ol></li></ol><p><strong>代码演示</strong></p><p><code>modules/user.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> getters = &#123;<br>  <span class="hljs-comment">// 分模块后，state指代子模块的state</span><br>  <span class="hljs-title class_">UpperCaseName</span> (state) &#123;<br>    <span class="hljs-keyword">return</span> state.<span class="hljs-property">userInfo</span>.<span class="hljs-property">name</span>.<span class="hljs-title function_">toUpperCase</span>()<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Son1.vue 直接访问 getters</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 测试访问模块中的getters - 原生 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; $store.getters[&#x27;user/UpperCaseName&#x27;] &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Son2.vue 通过命名空间访问</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">computed</span>:&#123;<br>  ...<span class="hljs-title function_">mapGetters</span>(<span class="hljs-string">&#x27;user&#x27;</span>, [<span class="hljs-string">&#x27;UpperCaseName&#x27;</span>])<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="33-获取模块内的-mutations-方法"><a class="markdownIt-Anchor" href="#33-获取模块内的-mutations-方法"></a> 3.3 获取模块内的 mutations 方法</h2><p>默认模块中的 mutation 和 actions 会被挂载到全局，<strong>需要开启命名空间</strong>，才会挂载到子模块。</p><p><strong>调用方式</strong></p><ol><li>直接通过 store 调用 <code>$store.commit('模块名/xxx', 额外参数)</code></li><li>通过 mapMutations 映射<ol><li>默认根级别的映射 <code>mapMutations([ 'xxx' ])</code></li><li>子模块的映射 <code>mapMutations('模块名', ['xxx'])</code> - 需要开启命名空间</li></ol></li></ol><p><strong>代码实现</strong></p><p><code>modules/user.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mutations = &#123;<br>  setUser (state, newUserInfo) &#123;<br>    state.<span class="hljs-property">userInfo</span> = newUserInfo<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>modules/setting.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mutations = &#123;<br>  setTheme (state, newTheme) &#123;<br>    state.<span class="hljs-property">theme</span> = newTheme<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Son1.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;button @click=<span class="hljs-string">&quot;updateUser&quot;</span>&gt;更新个人信息&lt;/button&gt; <br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;updateTheme&quot;</span>&gt;</span>更新主题色<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">methods</span>: &#123;<br>    updateUser () &#123;<br>      <span class="hljs-comment">// $store.commit(&#x27;模块名/mutation名&#x27;, 额外传参)</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;user/setUser&#x27;</span>, &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;xiaowang&#x27;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">25</span><br>      &#125;)<br>    &#125;, <br>    updateTheme () &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;setting/setTheme&#x27;</span>, <span class="hljs-string">&#x27;pink&#x27;</span>)<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Son2.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;button @click=&quot;setUser(&#123; name: &#x27;xiaoli&#x27;, age: 80 &#125;)&quot;&gt;更新个人信息&lt;/button&gt;<br>&lt;button @click=&quot;setTheme(&#x27;skyblue&#x27;)&quot;&gt;更新主题&lt;/button&gt;<br><br>methods:&#123;<br>// 分模块的映射<br>...mapMutations(&#x27;setting&#x27;, [&#x27;setTheme&#x27;]),<br>...mapMutations(&#x27;user&#x27;, [&#x27;setUser&#x27;]),<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="34-获取模块内的-actions-方法"><a class="markdownIt-Anchor" href="#34-获取模块内的-actions-方法"></a> 3.4 获取模块内的 actions 方法</h2><p><strong>注意：</strong></p><p>默认模块中的 mutation 和 actions 会被挂载到全局，<strong>需要开启命名空间</strong>，才会挂载到子模块。</p><p><strong>调用语法：</strong></p><ol><li>直接通过 store 调用 <code>$store.dispatch('模块名/xxx', 额外参数)</code></li><li>通过 mapActions 映射<ol><li>默认根级别的映射 <code>mapActions([ 'xxx' ])</code></li><li>子模块的映射 <code>mapActions('模块名', ['xxx'])</code> - 需要开启命名空间</li></ol></li></ol><p><strong>代码实现</strong></p><p>需求：</p><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img241/202406242247319.png" srcset="/img/loading.gif" lazyload alt="68343161569"></p><p><code>modules/user.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> actions = &#123;<br>  setUserSecond (context, newUserInfo) &#123;<br>    <span class="hljs-comment">// 将异步在action中进行封装，模拟发送请求</span><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">// 调用mutation   context上下文，默认提交的就是自己模块的action和mutation</span><br>      context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;setUser&#x27;</span>, newUserInfo)<br>    &#125;, <span class="hljs-number">1000</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Son1.vue 直接通过 store 调用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;button @click=&quot;updateUser2&quot;&gt;一秒后更新信息&lt;/button&gt;<br><br>methods:&#123;<br>    updateUser2 () &#123;<br>      // 调用action dispatch<br>      this.$store.dispatch(&#x27;user/setUserSecond&#x27;, &#123;<br>        name: &#x27;xiaohong&#x27;,<br>        age: 28<br>      &#125;)<br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p>Son2.vue mapActions 映射</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;button @click=<span class="hljs-string">&quot;setUserSecond(&#123; name: &#x27;xiaoli&#x27;, age: 80 &#125;)&quot;</span>&gt;一秒后更新信息&lt;/button&gt;<br><br><span class="hljs-attr">methods</span>:&#123;<br>  ...<span class="hljs-title function_">mapActions</span>(<span class="hljs-string">&#x27;user&#x27;</span>, [<span class="hljs-string">&#x27;setUserSecond&#x27;</span>])<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="35-vuex-模块化的使用小结"><a class="markdownIt-Anchor" href="#35-vuex-模块化的使用小结"></a> 3.5 Vuex 模块化的使用小结</h2><h3 id="351-直接使用"><a class="markdownIt-Anchor" href="#351-直接使用"></a> 3.5.1 直接使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">1.</span> state --&gt; $store.<span class="hljs-property">state</span>.**模块名**.数据项名<br><span class="hljs-number">2.</span> getters --&gt; $store.<span class="hljs-property">getters</span>[<span class="hljs-string">&#x27;**模块名**/属性名&#x27;</span>]<br><span class="hljs-number">3.</span> mutations --&gt; $store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;**模块名**/方法名&#x27;</span>, 其他参数)<br><span class="hljs-number">4.</span> actions --&gt; $store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&#x27;**模块名**/方法名&#x27;</span>, 其他参数)<br></code></pre></td></tr></table></figure><h3 id="352-借助辅助方法使用"><a class="markdownIt-Anchor" href="#352-借助辅助方法使用"></a> 3.5.2 借助辅助方法使用</h3><ol><li></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; mapXxxx, mapXxx &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><br>computed、<span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-comment">//  **...mapState、...mapGetters放computed中；**</span><br>    <span class="hljs-comment">//  **...mapMutations、...mapActions放methods中；**</span><br>    ...<span class="hljs-title function_">mapXxxx</span>(**<span class="hljs-string">&#x27;模块名&#x27;</span>**, [<span class="hljs-string">&#x27;数据项|方法&#x27;</span>]),<br>    ...<span class="hljs-title function_">mapXxxx</span>(**<span class="hljs-string">&#x27;模块名&#x27;</span>**, &#123;<span class="hljs-string">&#x27;新的名字: 原来的名字&#x27;</span>&#125;),<br>&#125;<br></code></pre></td></tr></table></figure><p>2.组件中直接使用 属性 <code>&#123;&#123; age &#125;&#125;</code> 或 方法 <code>@click=&quot;updateAge(2)&quot;</code></p></div><hr><div><div class="post-metas my-3"></div><div class="license-box my-3"><div class="license-title"><div>Vue基础入门到实战6（路由进阶+面经项目）</div><div>https://fulequn.github.io/2024/06/Article202406141/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Fulequn</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2024年6月11日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2024/06/Article202406111/" title="Vue基础入门到实战6（路由进阶+面经项目）"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Vue基础入门到实战6（路由进阶+面经项目）</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2024/06/Article202406071/" title="Vue基础入门到实战5（自定义指令+插槽+路由入门）"><span class="hidden-mobile">Vue基础入门到实战5（自定义指令+插槽+路由入门）</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>