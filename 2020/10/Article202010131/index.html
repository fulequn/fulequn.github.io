<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png"><link rel="icon" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Fulequn"><meta name="keywords" content=""><meta name="description" content="参考链接： http:&#x2F;&#x2F;blog.fens.me&#x2F;r-multi-linear-regression&#x2F;  前言 本文接上一篇R语言解读一元线性回归模型。在许多生活和工作的实际问题中，影响因变量的因素可能不止一个，比如对于知识水平越高的人，收入水平也越高，这样的一个结论。这其中可能包括了因为更好的家庭条件，所以有了更好的教育；因为在一线城市发展，所以有了更好的工作机会；所处的行业赶上了大的经济上"><meta property="og:type" content="article"><meta property="og:title" content="R语言解读多元线性回归模型"><meta property="og:url" content="https://fulequn.github.io/2020/10/Article202010131/index.html"><meta property="og:site_name" content="FuLeQun&#39;s Blog"><meta property="og:description" content="参考链接： http:&#x2F;&#x2F;blog.fens.me&#x2F;r-multi-linear-regression&#x2F;  前言 本文接上一篇R语言解读一元线性回归模型。在许多生活和工作的实际问题中，影响因变量的因素可能不止一个，比如对于知识水平越高的人，收入水平也越高，这样的一个结论。这其中可能包括了因为更好的家庭条件，所以有了更好的教育；因为在一线城市发展，所以有了更好的工作机会；所处的行业赶上了大的经济上"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909598.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909599.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909600.png"><meta property="og:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909601.png"><meta property="article:published_time" content="2020-10-13T12:32:28.000Z"><meta property="article:modified_time" content="2024-05-18T14:35:07.526Z"><meta property="article:author" content="Fulequn"><meta property="article:tag" content="R"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909598.png"><title>R语言解读多元线性回归模型 - FuLeQun&#39;s Blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"fulequn.github.io",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},gtag:null,tajs:null},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 7.2.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>FuLeQun&#39;s Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="R语言解读多元线性回归模型"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2020-10-13 20:32" pubdate>2020年10月13日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i>3.9k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i>33 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">R语言解读多元线性回归模型</h1><div class="markdown-body"><blockquote><p>参考链接：</p><p><a target="_blank" rel="noopener" href="http://blog.fens.me/r-multi-linear-regression/">http://blog.fens.me/r-multi-linear-regression/</a></p></blockquote><p><strong>前言</strong></p><p>本文接上一篇<a target="_blank" rel="noopener" href="http://blog.fens.me/r-linear-regression/">R语言解读一元线性回归模型</a>。在许多生活和工作的实际问题中，影响因变量的因素可能不止一个，比如对于知识水平越高的人，收入水平也越高，这样的一个结论。这其中可能包括了因为更好的家庭条件，所以有了更好的教育；因为在一线城市发展，所以有了更好的工作机会；所处的行业赶上了大的经济上行周期等。要想解读这些规律，是复杂的、多维度的，多元回归分析方法更适合解读生活的规律。</p><p>由于本文为非统计的专业文章，所以当出现与教课书不符的描述，请以教课书为准。本文力求用简化的语言，来介绍多元线性回归的知识，同时配合R语言的实现。</p><p><strong>目录</strong></p><ol><li>多元线性回归介绍</li><li>元线性回归建模</li><li>模型优化</li><li>案例：黑色系期货日K线数据验证</li></ol><h2 id="1-多元线性回归介绍"><a class="markdownIt-Anchor" href="#1-多元线性回归介绍"></a> 1. 多元线性回归介绍</h2><p>对比一元线性回归，多元线性回归是用来确定2个或2个以上变量间关系的统计分析方法。多元线性回归的基本的分析方法与一元线性回归方法是类似的，我们首先需要对选取多元数据集并定义数学模型，然后进行参数估计，对估计出来的参数进行显著性检验，残差分析，异常点检测，最后确定回归方程进行模型预测。</p><p>由于多元回归方程有多个自变量，区别于一元回归方程，有一项很重要的操作就是自变量的优化，挑选出相关性最显著的自变量，同时去除不显著的自变量。在R语言中，有很方便地用于优化函数，可以很好的帮助我们来改进回归模型。</p><p>下面就开始多元线性回归的建模过程。</p><h2 id="2-多元线性回归建模"><a class="markdownIt-Anchor" href="#2-多元线性回归建模"></a> 2. 多元线性回归建模</h2><p>做过商品期货研究的人，都知道黑色系品种是具有产业链上下游的关系。铁矿石是炼钢的原材料，焦煤和焦炭是炼钢的能源资源，热卷即热轧卷板是以板坯为原料经加热后制成的钢板，螺纹钢是表面带肋的钢筋。</p><p>由于有产业链的关系，假设我们想要预测螺纹钢的价格，那么影响螺纹钢价格的因素可以会涉及到原材料，能源资源和同类材料等。比如，铁矿石价格如果上涨，螺纹钢就应该要涨价了。</p><p><strong>2.1 数据集和数学模型</strong></p><p>先从数据开始介绍，这次的数据集，我选择的期货黑色系的品种的商品期货，包括了大连期货交易所的 焦煤(JM)，焦炭(J)，铁矿石(I)，上海期货交易所的 螺纹钢(RU) 和 热卷(HC)。</p><p>数据集为2016年3月15日，当日白天开盘的交易数据，为黑色系的5个期货合约的分钟线的价格数据。</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs dns"># 数据集已存在df变量中<br>&gt; head(df,<span class="hljs-number">20</span>)<br>                       x1    x2    x3   x4    y<br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">01:00 754</span>.<span class="hljs-number">5 616.5</span> <span class="hljs-number">426</span>.<span class="hljs-number">5</span> <span class="hljs-number">2215 2055</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">02:00 752</span>.<span class="hljs-number">5 614.5</span> <span class="hljs-number">423</span>.<span class="hljs-number">5</span> <span class="hljs-number">2206 2048</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">03:00 753</span>.<span class="hljs-number">0 614.0</span> <span class="hljs-number">423</span>.<span class="hljs-number">0</span> <span class="hljs-number">2199 2044</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">04:00 752</span>.<span class="hljs-number">5 613.0</span> <span class="hljs-number">422</span>.<span class="hljs-number">5</span> <span class="hljs-number">2197 2040</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">05:00 753</span>.<span class="hljs-number">0 615.5</span> <span class="hljs-number">424</span>.<span class="hljs-number">0</span> <span class="hljs-number">2198 2043</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">06:00 752</span>.<span class="hljs-number">5 614.5</span> <span class="hljs-number">422</span>.<span class="hljs-number">0</span> <span class="hljs-number">2195 2040</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">07:00 752</span>.<span class="hljs-number">0 614.0</span> <span class="hljs-number">421</span>.<span class="hljs-number">5</span> <span class="hljs-number">2193 2036</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">08:00 753</span>.<span class="hljs-number">0 615.0</span> <span class="hljs-number">422</span>.<span class="hljs-number">5</span> <span class="hljs-number">2197 2043</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">09:00 754</span>.<span class="hljs-number">0 615.5</span> <span class="hljs-number">422</span>.<span class="hljs-number">5</span> <span class="hljs-number">2197 2041</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">10:00 754</span>.<span class="hljs-number">5 615.5</span> <span class="hljs-number">423</span>.<span class="hljs-number">0</span> <span class="hljs-number">2200 2044</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">11:00 757</span>.<span class="hljs-number">0 616.5</span> <span class="hljs-number">423</span>.<span class="hljs-number">0</span> <span class="hljs-number">2201 2045</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">12:00 756</span>.<span class="hljs-number">0 615.5</span> <span class="hljs-number">423</span>.<span class="hljs-number">0</span> <span class="hljs-number">2200 2044</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">13:00 755</span>.<span class="hljs-number">5 615.0</span> <span class="hljs-number">423</span>.<span class="hljs-number">0</span> <span class="hljs-number">2197 2042</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">14:00 755</span>.<span class="hljs-number">5 615.0</span> <span class="hljs-number">423</span>.<span class="hljs-number">0</span> <span class="hljs-number">2196 2042</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">15:00 756</span>.<span class="hljs-number">0 616.0</span> <span class="hljs-number">423</span>.<span class="hljs-number">5</span> <span class="hljs-number">2200 2045</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">16:00 757</span>.<span class="hljs-number">5 616.0</span> <span class="hljs-number">424</span>.<span class="hljs-number">0</span> <span class="hljs-number">2205 2052</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">17:00 758</span>.<span class="hljs-number">5 618.0</span> <span class="hljs-number">424</span>.<span class="hljs-number">0</span> <span class="hljs-number">2204 2051</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">18:00 759</span>.<span class="hljs-number">5 618.5</span> <span class="hljs-number">424</span>.<span class="hljs-number">0</span> <span class="hljs-number">2205 2053</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">19:00 759</span>.<span class="hljs-number">5 617.5</span> <span class="hljs-number">424</span>.<span class="hljs-number">5</span> <span class="hljs-number">2206 2053</span><br><span class="hljs-number">2016-03-15</span> <span class="hljs-number">09</span>:<span class="hljs-number">20:00 758</span>.<span class="hljs-number">5 617.5</span> <span class="hljs-number">423</span>.<span class="hljs-number">5</span> <span class="hljs-number">2201 2050</span><br></code></pre></td></tr></table></figure><p>数据集包括有6列:</p><ul><li>索引, 为时间</li><li>x1, 为焦炭(j1605)合约的1分钟线的报价数据</li><li>x2, 为焦煤(jm1605)合约的1分钟线的报价数据</li><li>x3, 为铁矿石(i1605)合约的1分钟线的报价数据</li><li>x4, 为热卷(hc1605)合约的1分钟线的报价数据</li><li>y, 为螺纹钢(rb1605)合约的1分钟线的报价数据</li></ul><p>假设螺纹钢的价格与其他4个商品的价格有线性关系，那么我们建立以螺纹钢为因变量，以焦煤、焦炭、铁矿石和热卷的为自变量的多元线性回归模型。用公式表示为：</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">y = a + <span class="hljs-keyword">b</span> * <span class="hljs-built_in">x1</span> + c * <span class="hljs-built_in">x2</span> + d * <span class="hljs-built_in">x3</span> + e * <span class="hljs-built_in">x4</span> + ε<br></code></pre></td></tr></table></figure><ul><li>y，为因变量，螺纹钢</li><li>x1，为自变量，焦煤</li><li>x2，为自变量，焦炭</li><li>x3，为自变量，铁矿石</li><li>x4，为自变量，热卷</li><li>a，为截距</li><li>b,c,d,e，为自变量系数</li><li>ε, 为残差，是其他一切不确定因素影响的总和，其值不可观测。假定ε服从正态分布N(0,σ^2)。</li></ul><p>通过对多元线性回归模型的数学定义，接下来让我们利用数据集做多元回归模型的参数估计。</p><p><strong>2.2. 回归参数估计</strong></p><p>上面公式中，回归参数 a, b, c, d,e都是我们不知道的，参数估计就是通过数据来估计出这些参数，从而确定自变量和因变量之前的关系。我们的目标是要计算出一条直线，使直线上每个点的Y值和实际数据的Y值之差的平方和最小，即（Y1实际-Y1预测）<sup>2+（Y2实际-Y2预测）</sup>2+ …… +（Yn实际-Yn预测）^2 的值最小。参数估计时，我们只考虑Y随X自变量的线性变化的部分，而残差ε是不可观测的，参数估计法并不需要考虑残差。</p><p>类似于一元线性回归，我们用R语言来实现对数据的回归模型的参数估计，用lm()函数来实现多元线性回归的建模过程。</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-comment"># 建立多元线性回归模型</span><br>&gt; lm1&lt;-lm(y~<span class="hljs-built_in">x1</span>+<span class="hljs-built_in">x2</span>+<span class="hljs-built_in">x3</span>+<span class="hljs-built_in">x4</span>,<span class="hljs-meta">data</span><span class="hljs-symbol">=df</span>)<br><br><span class="hljs-comment"># 打印参数估计的结果</span><br>&gt; lm1<br><br><span class="hljs-symbol">Call:</span><br><span class="hljs-symbol">lm</span>(formula = y ~ <span class="hljs-built_in">x1</span> + <span class="hljs-built_in">x2</span> + <span class="hljs-built_in">x3</span> + <span class="hljs-built_in">x4</span>, <span class="hljs-meta">data</span> = df)<br><br><span class="hljs-symbol">Coefficients:</span><br>(Intercept)           <span class="hljs-built_in">x1</span>           <span class="hljs-built_in">x2</span>           <span class="hljs-built_in">x3</span>           <span class="hljs-built_in">x4</span>  <br>   <span class="hljs-number">212</span>.<span class="hljs-number">8780</span>       <span class="hljs-number">0</span>.<span class="hljs-number">8542</span>       <span class="hljs-number">0</span>.<span class="hljs-number">6672</span>      -<span class="hljs-number">0</span>.<span class="hljs-number">6674</span>       <span class="hljs-number">0</span>.<span class="hljs-number">4821</span>  <br></code></pre></td></tr></table></figure><p>这样我们就得到了y和x关系的方程。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">y</span> = <span class="hljs-number">212</span>.<span class="hljs-number">8780</span> + <span class="hljs-number">0</span>.<span class="hljs-number">8542</span> * x1 + <span class="hljs-number">0</span>.<span class="hljs-number">6672</span> * x2 - <span class="hljs-number">0</span>.<span class="hljs-number">6674</span> * x3 + <span class="hljs-number">0</span>.<span class="hljs-number">4821</span> * x4<br></code></pre></td></tr></table></figure><p><strong>2.3. 回归方程的显著性检验</strong></p><p>参考一元线性回归的显著性检验，多元线性回归的显著性检验，同样是需要经过 T检验，F检验，和R^2(R平方)相关系统检验。在R语言中这三种检验的方法都已被实现，我们只需要把结果解读，我们可以summary()函数来提取模型的计算结果。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">&gt;</span> <span class="hljs-string">summary(lm1)</span><br><br><span class="hljs-attr">Call:</span><br><span class="hljs-string">lm(formula</span> <span class="hljs-string">=</span> <span class="hljs-string">y</span> <span class="hljs-string">~</span> <span class="hljs-string">x1</span> <span class="hljs-string">+</span> <span class="hljs-string">x2</span> <span class="hljs-string">+</span> <span class="hljs-string">x3</span> <span class="hljs-string">+</span> <span class="hljs-string">x4,</span> <span class="hljs-string">data</span> <span class="hljs-string">=</span> <span class="hljs-string">df)</span><br><br><span class="hljs-attr">Residuals:</span><br>    <span class="hljs-string">Min</span>      <span class="hljs-string">1Q</span>  <span class="hljs-string">Median</span>      <span class="hljs-string">3Q</span>     <span class="hljs-string">Max</span> <br><span class="hljs-number">-4.9648</span> <span class="hljs-number">-1.3241</span> <span class="hljs-number">-0.0319</span>  <span class="hljs-number">1.2403</span>  <span class="hljs-number">5.4194</span> <br><br><span class="hljs-attr">Coefficients:</span><br>             <span class="hljs-string">Estimate</span> <span class="hljs-string">Std.</span> <span class="hljs-string">Error</span> <span class="hljs-string">t</span> <span class="hljs-string">value</span> <span class="hljs-string">Pr(&gt;|t|)</span>    <br><span class="hljs-string">(Intercept)</span> <span class="hljs-number">212.87796</span>   <span class="hljs-number">58.26788</span>   <span class="hljs-number">3.653</span> <span class="hljs-number">0.000323</span> <span class="hljs-string">***</span><br><span class="hljs-string">x1</span>            <span class="hljs-number">0.85423</span>    <span class="hljs-number">0.10958</span>   <span class="hljs-number">7.795</span> <span class="hljs-number">2.50e-13</span> <span class="hljs-string">***</span><br><span class="hljs-string">x2</span>            <span class="hljs-number">0.66724</span>    <span class="hljs-number">0.12938</span>   <span class="hljs-number">5.157</span> <span class="hljs-number">5.57e-07</span> <span class="hljs-string">***</span><br><span class="hljs-string">x3</span>           <span class="hljs-number">-0.66741</span>    <span class="hljs-number">0.15421</span>  <span class="hljs-number">-4.328</span> <span class="hljs-number">2.28e-05</span> <span class="hljs-string">***</span><br><span class="hljs-string">x4</span>            <span class="hljs-number">0.48214</span>    <span class="hljs-number">0.01959</span>  <span class="hljs-number">24.609</span>  <span class="hljs-string">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-string">***</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">Signif. codes:</span>  <span class="hljs-number">0</span> <span class="hljs-string">‘***’</span> <span class="hljs-number">0.001</span> <span class="hljs-string">‘**’</span> <span class="hljs-number">0.01</span> <span class="hljs-string">‘*’</span> <span class="hljs-number">0.05</span> <span class="hljs-string">‘.’</span> <span class="hljs-number">0.1</span> <span class="hljs-string">‘</span> <span class="hljs-string">’</span> <span class="hljs-number">1</span><br><br><span class="hljs-attr">Residual standard error:</span> <span class="hljs-number">2.028</span> <span class="hljs-string">on</span> <span class="hljs-number">221</span> <span class="hljs-string">degrees</span> <span class="hljs-string">of</span> <span class="hljs-string">freedom</span><br><span class="hljs-attr">Multiple R-squared:</span>  <span class="hljs-number">0.9725</span><span class="hljs-string">,</span>	<span class="hljs-attr">Adjusted R-squared:</span>  <span class="hljs-number">0.972</span> <br><span class="hljs-attr">F-statistic:</span>  <span class="hljs-number">1956 </span><span class="hljs-string">on</span> <span class="hljs-number">4</span> <span class="hljs-string">and</span> <span class="hljs-number">221</span> <span class="hljs-string">DF,</span>  <span class="hljs-attr">p-value:</span> <span class="hljs-string">&lt;</span> <span class="hljs-number">2.2e-16</span><br></code></pre></td></tr></table></figure><ul><li>T检验：所自变量都是非常显著***</li><li>F检验：同样是非常显著，p-value &lt; 2.2e-16</li><li>调整后的R^2：相关性非常强为0.972</li></ul><p>最后，我们通过的回归参数的检验与回归方程的检验，得到最后多元线性回归方程为：</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dns">y = <span class="hljs-number">212.87796</span> + <span class="hljs-number">0.85423</span> * x1 + <span class="hljs-number">0.66724</span> * x2 - <span class="hljs-number">0.66741</span> * x3 + <span class="hljs-number">0.48214</span> * x4<br><br>即<br><br>螺纹钢 = <span class="hljs-number">212.87796</span> + <span class="hljs-number">0.85423</span> * 焦炭 + <span class="hljs-number">0.66724</span> * 焦煤 - <span class="hljs-number">0.66741</span> * 铁矿石 + <span class="hljs-number">0.48214</span> * 热卷<br></code></pre></td></tr></table></figure><p><strong>2.4 残差分析和异常点检测</strong></p><p>在得到的回归模型进行显著性检验后，还要在做残差分析(预测值和实际值之间的差)，检验模型的正确性，残差必须服从正态分布N(0,σ^2)。直接用plot()函数生成4种用于模型诊断的图形，进行直观地分析。</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs node-repl"><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript"><span class="hljs-title function_">par</span>(mfrow=<span class="hljs-title function_">c</span>(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>))</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript"><span class="hljs-title function_">plot</span>(lm1)</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909598.png" srcset="/img/loading.gif" lazyload alt="2"></p><ul><li>残差和拟合值(左上)，残差和拟合值之间数据点均匀分布在y=0两侧，呈现出随机的分布，红色线呈现出一条平稳的曲线并没有明显的形状特征。</li><li>残差QQ图(右上)，数据点按对角直线排列，趋于一条直线，并被对角直接穿过，直观上符合正态分布。</li><li>标准化残差平方根和拟合值(左下)，数据点均匀分布在y=0两侧，呈现出随机的分布，红色线呈现出一条平稳的曲线并没有明显的形状特征。</li><li>标准化残差和杠杆值(右下)，没有出现红色的等高线，则说明数据中没有特别影响回归结果的异常点。</li></ul><p>结论，没有明显的异常点，残差符合假设条件。</p><p><strong>2.5. 模型预测</strong></p><p>我们得到了多元线性回归方程的公式，就可以对数据进行预测了。我们可以用R语言的predict()函数来计算预测值y0和相应的预测区间，并把实际值和预测值一起可视化化展示。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> par<span class="hljs-punctuation">(</span>mfrow<span class="hljs-operator">=</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>  <span class="hljs-comment">#设置画面布局</span><br><br><span class="hljs-comment"># 预测计算</span><br><span class="hljs-operator">&gt;</span> dfp<span class="hljs-operator">&lt;-</span>predict<span class="hljs-punctuation">(</span>lm1<span class="hljs-punctuation">,</span>interval<span class="hljs-operator">=</span><span class="hljs-string">&quot;prediction&quot;</span><span class="hljs-punctuation">)</span><br><br><span class="hljs-comment"># 打印预测时</span><br><span class="hljs-operator">&gt;</span> head<span class="hljs-punctuation">(</span>dfp<span class="hljs-punctuation">,</span><span class="hljs-number">10</span><span class="hljs-punctuation">)</span><br>                fit      lwr      upr<br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">03</span><span class="hljs-operator">-</span><span class="hljs-number">21</span> <span class="hljs-number">3160.526</span> <span class="hljs-number">3046.425</span> <span class="hljs-number">3274.626</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">03</span><span class="hljs-operator">-</span><span class="hljs-number">24</span> <span class="hljs-number">3193.253</span> <span class="hljs-number">3078.868</span> <span class="hljs-number">3307.637</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">03</span><span class="hljs-operator">-</span><span class="hljs-number">25</span> <span class="hljs-number">3240.389</span> <span class="hljs-number">3126.171</span> <span class="hljs-number">3354.607</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">03</span><span class="hljs-operator">-</span><span class="hljs-number">26</span> <span class="hljs-number">3228.565</span> <span class="hljs-number">3114.420</span> <span class="hljs-number">3342.710</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">03</span><span class="hljs-operator">-</span><span class="hljs-number">27</span> <span class="hljs-number">3222.528</span> <span class="hljs-number">3108.342</span> <span class="hljs-number">3336.713</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">03</span><span class="hljs-operator">-</span><span class="hljs-number">28</span> <span class="hljs-number">3262.399</span> <span class="hljs-number">3148.132</span> <span class="hljs-number">3376.666</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">03</span><span class="hljs-operator">-</span><span class="hljs-number">31</span> <span class="hljs-number">3291.996</span> <span class="hljs-number">3177.648</span> <span class="hljs-number">3406.344</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">04</span><span class="hljs-operator">-</span><span class="hljs-number">01</span> <span class="hljs-number">3305.870</span> <span class="hljs-number">3191.447</span> <span class="hljs-number">3420.294</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">04</span><span class="hljs-operator">-</span><span class="hljs-number">02</span> <span class="hljs-number">3275.370</span> <span class="hljs-number">3161.018</span> <span class="hljs-number">3389.723</span><br><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">04</span><span class="hljs-operator">-</span><span class="hljs-number">03</span> <span class="hljs-number">3297.358</span> <span class="hljs-number">3182.960</span> <span class="hljs-number">3411.755</span><br><br><span class="hljs-comment"># 合并数据</span><br><span class="hljs-operator">&gt;</span> mdf<span class="hljs-operator">&lt;-</span>merge<span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>y<span class="hljs-punctuation">,</span>dfp<span class="hljs-punctuation">)</span>	 <br><br><span class="hljs-comment"># 画图</span><br><span class="hljs-operator">&gt;</span> draw<span class="hljs-punctuation">(</span>mdf<span class="hljs-punctuation">)</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909599.png" srcset="/img/loading.gif" lazyload alt="3"></p><p>图例说明</p><ul><li>y, 实际价格，红色线</li><li>fit, 预测价格，绿色线</li><li>lwr，预测最低价，蓝色线</li><li>upr，预测最高价，紫色线</li></ul><p>从图中看出，实际价格y和预测价格fit，在大多数的时候都是很贴近的。我们的一个模型就训练好了！</p><h2 id="3-模型优化"><a class="markdownIt-Anchor" href="#3-模型优化"></a> 3. 模型优化</h2><p>上文中，我们已经很顺利的发现了一个非常不错的模型。如果要进行模型优化，可以用R语言中update()函数进行模型的调整。我们首先检查一下每个自变量x1,x2,x3,x4和因变量y之间的关系。</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">pairs</span>(<span class="hljs-keyword">as</span>.<span class="hljs-class"><span class="hljs-keyword">data</span>.frame(<span class="hljs-title">df</span>))</span><br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909600.png" srcset="/img/loading.gif" lazyload alt="4"></p><p>从图中，我们可以发现x2与Y的关系，可能是最偏离线性的。那么，我们尝试对多元线性回归模型进行调整，从原模型中去掉x2变量。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-comment"># 模型调整</span><br><span class="hljs-operator">&gt;</span> lm2<span class="hljs-operator">&lt;-</span>update<span class="hljs-punctuation">(</span>lm1<span class="hljs-punctuation">,</span> .<span class="hljs-operator">~</span>. <span class="hljs-operator">-</span>x2<span class="hljs-punctuation">)</span><br><br><span class="hljs-operator">&gt;</span> summary<span class="hljs-punctuation">(</span>lm2<span class="hljs-punctuation">)</span><br><br>Call<span class="hljs-operator">:</span><br>lm<span class="hljs-punctuation">(</span>formula <span class="hljs-operator">=</span> y <span class="hljs-operator">~</span> x1 <span class="hljs-operator">+</span> x3 <span class="hljs-operator">+</span> x4<span class="hljs-punctuation">,</span> data <span class="hljs-operator">=</span> df<span class="hljs-punctuation">)</span><br><br>Residuals<span class="hljs-operator">:</span><br>    Min      <span class="hljs-number">1</span>Q  Median      <span class="hljs-number">3</span>Q     Max <br><span class="hljs-operator">-</span><span class="hljs-number">6.0039</span> <span class="hljs-operator">-</span><span class="hljs-number">1.3842</span>  <span class="hljs-number">0.0177</span>  <span class="hljs-number">1.3513</span>  <span class="hljs-number">4.8028</span> <br><br>Coefficients<span class="hljs-operator">:</span><br>             Estimate Std. Error t value Pr<span class="hljs-punctuation">(</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">|</span>t<span class="hljs-operator">|</span><span class="hljs-punctuation">)</span>    <br><span class="hljs-punctuation">(</span>Intercept<span class="hljs-punctuation">)</span> <span class="hljs-number">462.47104</span>   <span class="hljs-number">34.26636</span>   <span class="hljs-number">13.50</span>  <span class="hljs-operator">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>x1            <span class="hljs-number">1.08728</span>    <span class="hljs-number">0.10543</span>   <span class="hljs-number">10.31</span>  <span class="hljs-operator">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>x3           <span class="hljs-operator">-</span><span class="hljs-number">0.40788</span>    <span class="hljs-number">0.15394</span>   <span class="hljs-operator">-</span><span class="hljs-number">2.65</span>  <span class="hljs-number">0.00864</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span> <br>x4            <span class="hljs-number">0.42582</span>    <span class="hljs-number">0.01718</span>   <span class="hljs-number">24.79</span>  <span class="hljs-operator">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-operator">-</span><br>Signif. codes<span class="hljs-operator">:</span>  <br><span class="hljs-number">0</span> ‘<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>’ <span class="hljs-number">0.001</span> ‘<span class="hljs-operator">*</span><span class="hljs-operator">*</span>’ <span class="hljs-number">0.01</span> ‘<span class="hljs-operator">*</span>’ <span class="hljs-number">0.05</span> ‘.’ <span class="hljs-number">0.1</span> ‘ ’ <span class="hljs-number">1</span><br><br>Residual standard error<span class="hljs-operator">:</span> <span class="hljs-number">2.142</span> on <span class="hljs-number">222</span> degrees of freedom<br>Multiple R<span class="hljs-operator">-</span>squared<span class="hljs-operator">:</span>  <span class="hljs-number">0.9692</span><span class="hljs-punctuation">,</span>	Adjusted R<span class="hljs-operator">-</span>squared<span class="hljs-operator">:</span>  <span class="hljs-number">0.9688</span> <br><span class="hljs-built_in">F</span><span class="hljs-operator">-</span>statistic<span class="hljs-operator">:</span>  <span class="hljs-number">2330</span> on <span class="hljs-number">3</span> and <span class="hljs-number">222</span> DF<span class="hljs-punctuation">,</span>  p<span class="hljs-operator">-</span>value<span class="hljs-operator">:</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">2.2e-16</span><br></code></pre></td></tr></table></figure><p>当把自变量x2去掉后，自变量x3的T检验反而变大了，同时Adjusted R-squared变小了，所以我们这次调整是有问题的。</p><p>如果通过生产和原材料的内在逻辑分析，焦煤与焦炭属于上下游关系。焦煤是生产焦炭的一种原材料，焦炭是焦煤与其他炼焦煤经过配煤焦化形成的产品，一般生产 1 吨焦炭需要1.33 吨炼焦煤，其中焦煤至少占 30% 。</p><p>我们把焦煤和焦炭的关系改变一下，增加x1*x2的关系匹配到模型，看看效果。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-comment"># 模型调整</span><br><span class="hljs-operator">&gt;</span> lm3<span class="hljs-operator">&lt;-</span>update<span class="hljs-punctuation">(</span>lm1<span class="hljs-punctuation">,</span> .<span class="hljs-operator">~</span>. <span class="hljs-operator">+</span> x1<span class="hljs-operator">*</span>x2<span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> summary<span class="hljs-punctuation">(</span>lm3<span class="hljs-punctuation">)</span><br><br>Call<span class="hljs-operator">:</span><br>lm<span class="hljs-punctuation">(</span>formula <span class="hljs-operator">=</span> y <span class="hljs-operator">~</span> x1 <span class="hljs-operator">+</span> x2 <span class="hljs-operator">+</span> x3 <span class="hljs-operator">+</span> x4 <span class="hljs-operator">+</span> x1<span class="hljs-operator">:</span>x2<span class="hljs-punctuation">,</span> data <span class="hljs-operator">=</span> df<span class="hljs-punctuation">)</span><br><br>Residuals<span class="hljs-operator">:</span><br>    Min      <span class="hljs-number">1</span>Q  Median      <span class="hljs-number">3</span>Q     Max <br><span class="hljs-operator">-</span><span class="hljs-number">4.8110</span> <span class="hljs-operator">-</span><span class="hljs-number">1.3501</span> <span class="hljs-operator">-</span><span class="hljs-number">0.0595</span>  <span class="hljs-number">1.2019</span>  <span class="hljs-number">5.3884</span> <br><br>Coefficients<span class="hljs-operator">:</span><br>              Estimate Std. Error t value Pr<span class="hljs-punctuation">(</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">|</span>t<span class="hljs-operator">|</span><span class="hljs-punctuation">)</span>    <br><span class="hljs-punctuation">(</span>Intercept<span class="hljs-punctuation">)</span> <span class="hljs-number">7160.32231</span> <span class="hljs-number">7814.50048</span>   <span class="hljs-number">0.916</span>    <span class="hljs-number">0.361</span>    <br>x1            <span class="hljs-operator">-</span><span class="hljs-number">8.45530</span>   <span class="hljs-number">10.47167</span>  <span class="hljs-operator">-</span><span class="hljs-number">0.807</span>    <span class="hljs-number">0.420</span>    <br>x2           <span class="hljs-operator">-</span><span class="hljs-number">10.58406</span>   <span class="hljs-number">12.65579</span>  <span class="hljs-operator">-</span><span class="hljs-number">0.836</span>    <span class="hljs-number">0.404</span>    <br>x3            <span class="hljs-operator">-</span><span class="hljs-number">0.64344</span>    <span class="hljs-number">0.15662</span>  <span class="hljs-operator">-</span><span class="hljs-number">4.108</span> <span class="hljs-number">5.63e-05</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>x4             <span class="hljs-number">0.48363</span>    <span class="hljs-number">0.01967</span>  <span class="hljs-number">24.584</span>  <span class="hljs-operator">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>x1<span class="hljs-operator">:</span>x2          <span class="hljs-number">0.01505</span>    <span class="hljs-number">0.01693</span>   <span class="hljs-number">0.889</span>    <span class="hljs-number">0.375</span>    <br><span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-operator">-</span><br>Signif. codes<span class="hljs-operator">:</span>  <br><span class="hljs-number">0</span> ‘<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>’ <span class="hljs-number">0.001</span> ‘<span class="hljs-operator">*</span><span class="hljs-operator">*</span>’ <span class="hljs-number">0.01</span> ‘<span class="hljs-operator">*</span>’ <span class="hljs-number">0.05</span> ‘.’ <span class="hljs-number">0.1</span> ‘ ’ <span class="hljs-number">1</span><br><br>Residual standard error<span class="hljs-operator">:</span> <span class="hljs-number">2.029</span> on <span class="hljs-number">220</span> degrees of freedom<br>Multiple R<span class="hljs-operator">-</span>squared<span class="hljs-operator">:</span>  <span class="hljs-number">0.9726</span><span class="hljs-punctuation">,</span>	Adjusted R<span class="hljs-operator">-</span>squared<span class="hljs-operator">:</span>  <span class="hljs-number">0.972</span> <br><span class="hljs-built_in">F</span><span class="hljs-operator">-</span>statistic<span class="hljs-operator">:</span>  <span class="hljs-number">1563</span> on <span class="hljs-number">5</span> and <span class="hljs-number">220</span> DF<span class="hljs-punctuation">,</span>  p<span class="hljs-operator">-</span>value<span class="hljs-operator">:</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">2.2e-16</span><br></code></pre></td></tr></table></figure><p>从结果中发现，增加了x1*x2列后，原来的x1,x2和Intercept的T检验都不显著。继续调整模型，从模型中去掉x1,x2两个自变量。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-comment"># 模型调整</span><br><span class="hljs-operator">&gt;</span> lm4<span class="hljs-operator">&lt;-</span>update<span class="hljs-punctuation">(</span>lm3<span class="hljs-punctuation">,</span> .<span class="hljs-operator">~</span>. <span class="hljs-operator">-</span>x1<span class="hljs-operator">-</span>x2<span class="hljs-punctuation">)</span><br><span class="hljs-operator">&gt;</span> summary<span class="hljs-punctuation">(</span>lm4<span class="hljs-punctuation">)</span><br><br>Call<span class="hljs-operator">:</span><br>lm<span class="hljs-punctuation">(</span>formula <span class="hljs-operator">=</span> y <span class="hljs-operator">~</span> x3 <span class="hljs-operator">+</span> x4 <span class="hljs-operator">+</span> x1<span class="hljs-operator">:</span>x2<span class="hljs-punctuation">,</span> data <span class="hljs-operator">=</span> df<span class="hljs-punctuation">)</span><br><br>Residuals<span class="hljs-operator">:</span><br>    Min      <span class="hljs-number">1</span>Q  Median      <span class="hljs-number">3</span>Q     Max <br><span class="hljs-operator">-</span><span class="hljs-number">4.9027</span> <span class="hljs-operator">-</span><span class="hljs-number">1.2516</span> <span class="hljs-operator">-</span><span class="hljs-number">0.0167</span>  <span class="hljs-number">1.2748</span>  <span class="hljs-number">5.8683</span> <br><br>Coefficients<span class="hljs-operator">:</span><br>              Estimate Std. Error t value Pr<span class="hljs-punctuation">(</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">|</span>t<span class="hljs-operator">|</span><span class="hljs-punctuation">)</span>    <br><span class="hljs-punctuation">(</span>Intercept<span class="hljs-punctuation">)</span>  <span class="hljs-number">6.950e+02</span>  <span class="hljs-number">1.609e+01</span>  <span class="hljs-number">43.183</span>  <span class="hljs-operator">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>x3          <span class="hljs-operator">-</span><span class="hljs-number">6.284e-01</span>  <span class="hljs-number">1.530e-01</span>  <span class="hljs-operator">-</span><span class="hljs-number">4.108</span> <span class="hljs-number">5.61e-05</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>x4           <span class="hljs-number">4.959e-01</span>  <span class="hljs-number">1.785e-02</span>  <span class="hljs-number">27.783</span>  <span class="hljs-operator">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br>x1<span class="hljs-operator">:</span>x2        <span class="hljs-number">1.133e-03</span>  <span class="hljs-number">9.524e-05</span>  <span class="hljs-number">11.897</span>  <span class="hljs-operator">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><br><span class="hljs-operator">-</span><span class="hljs-operator">-</span><span class="hljs-operator">-</span><br>Signif. codes<span class="hljs-operator">:</span>  <span class="hljs-number">0</span> ‘<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>’ <span class="hljs-number">0.001</span> ‘<span class="hljs-operator">*</span><span class="hljs-operator">*</span>’ <span class="hljs-number">0.01</span> ‘<span class="hljs-operator">*</span>’ <span class="hljs-number">0.05</span> ‘.’ <span class="hljs-number">0.1</span> ‘ ’ <span class="hljs-number">1</span><br><br>Residual standard error<span class="hljs-operator">:</span> <span class="hljs-number">2.035</span> on <span class="hljs-number">222</span> degrees of freedom<br>Multiple R<span class="hljs-operator">-</span>squared<span class="hljs-operator">:</span>  <span class="hljs-number">0.9722</span><span class="hljs-punctuation">,</span>	Adjusted R<span class="hljs-operator">-</span>squared<span class="hljs-operator">:</span>  <span class="hljs-number">0.9718</span> <br><span class="hljs-built_in">F</span><span class="hljs-operator">-</span>statistic<span class="hljs-operator">:</span>  <span class="hljs-number">2588</span> on <span class="hljs-number">3</span> and <span class="hljs-number">222</span> DF<span class="hljs-punctuation">,</span>  p<span class="hljs-operator">-</span>value<span class="hljs-operator">:</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">2.2e-16</span><br></code></pre></td></tr></table></figure><p>从调整后的结果来看，效果还不错。不过，也并没有比最初的模型有所提高。</p><p>对于模型调整的过程，如果我们手动调整测试时，一般都会基于业务知识来操作。如果是按照数据指标来计算，我们可以用R语言中提供的逐步回归的优化方法，通过AIC指标来判断是否需要参数优化。</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-comment">#对lm1模型做逐步回归</span><br>&gt; step(lm1)<br><span class="hljs-symbol">Start:</span>  AIC<span class="hljs-number">=324</span>.<span class="hljs-number">51</span><br>y ~ <span class="hljs-built_in">x1</span> + <span class="hljs-built_in">x2</span> + <span class="hljs-built_in">x3</span> + <span class="hljs-built_in">x4</span><br><br>       Df Sum of Sq    RSS    AIC<br>               <span class="hljs-number">908</span>.<span class="hljs-number">8</span> <span class="hljs-number">324</span>.<span class="hljs-number">51</span><br>- <span class="hljs-built_in">x3</span>    <span class="hljs-number">1</span>     <span class="hljs-number">77</span>.<span class="hljs-number">03</span>  <span class="hljs-number">985</span>.<span class="hljs-number">9</span> <span class="hljs-number">340</span>.<span class="hljs-number">90</span><br>- <span class="hljs-built_in">x2</span>    <span class="hljs-number">1</span>    <span class="hljs-number">109</span>.<span class="hljs-number">37</span> <span class="hljs-number">1018</span>.<span class="hljs-number">2</span> <span class="hljs-number">348</span>.<span class="hljs-number">19</span><br>- <span class="hljs-built_in">x1</span>    <span class="hljs-number">1</span>    <span class="hljs-number">249</span>.<span class="hljs-number">90</span> <span class="hljs-number">1158</span>.<span class="hljs-number">8</span> <span class="hljs-number">377</span>.<span class="hljs-number">41</span><br>- <span class="hljs-built_in">x4</span>    <span class="hljs-number">1</span>   <span class="hljs-number">2490</span>.<span class="hljs-number">56</span> <span class="hljs-number">3399</span>.<span class="hljs-number">4</span> <span class="hljs-number">620</span>.<span class="hljs-number">65</span><br><br><span class="hljs-symbol">Call:</span><br><span class="hljs-symbol">lm</span>(formula = y ~ <span class="hljs-built_in">x1</span> + <span class="hljs-built_in">x2</span> + <span class="hljs-built_in">x3</span> + <span class="hljs-built_in">x4</span>, <span class="hljs-meta">data</span> = df)<br><br><span class="hljs-symbol">Coefficients:</span><br>(Intercept)           <span class="hljs-built_in">x1</span>           <span class="hljs-built_in">x2</span>           <span class="hljs-built_in">x3</span>           <span class="hljs-built_in">x4</span>  <br>   <span class="hljs-number">212</span>.<span class="hljs-number">8780</span>       <span class="hljs-number">0</span>.<span class="hljs-number">8542</span>       <span class="hljs-number">0</span>.<span class="hljs-number">6672</span>      -<span class="hljs-number">0</span>.<span class="hljs-number">6674</span>       <span class="hljs-number">0</span>.<span class="hljs-number">4821</span>  <br></code></pre></td></tr></table></figure><p>通过计算AIC指标，lm1的模型AIC最小时为324.51，每次去掉一个自变量都会让AIC的值变大，所以我们还是不调整比较好。</p><p>对刚才的lm3模型做逐步回归的模型调整。</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-comment">#对lm3模型做逐步回归</span><br>&gt; step(lm3)<br><span class="hljs-symbol">Start:</span>  AIC<span class="hljs-number">=325</span>.<span class="hljs-number">7</span>               #当前AIC<br>y ~ <span class="hljs-built_in">x1</span> + <span class="hljs-built_in">x2</span> + <span class="hljs-built_in">x3</span> + <span class="hljs-built_in">x4</span> + <span class="hljs-built_in">x1</span>:<span class="hljs-built_in">x2</span><br><br>        Df Sum of Sq    RSS    AIC<br>- <span class="hljs-built_in">x1</span>:<span class="hljs-built_in">x2</span>  <span class="hljs-number">1</span>      <span class="hljs-number">3</span>.<span class="hljs-number">25</span>  <span class="hljs-number">908</span>.<span class="hljs-number">8</span> <span class="hljs-number">324</span>.<span class="hljs-number">51</span><br>                <span class="hljs-number">905</span>.<span class="hljs-number">6</span> <span class="hljs-number">325</span>.<span class="hljs-number">70</span><br>- <span class="hljs-built_in">x3</span>     <span class="hljs-number">1</span>     <span class="hljs-number">69</span>.<span class="hljs-number">47</span>  <span class="hljs-number">975</span>.<span class="hljs-number">1</span> <span class="hljs-number">340</span>.<span class="hljs-number">41</span><br>- <span class="hljs-built_in">x4</span>     <span class="hljs-number">1</span>   <span class="hljs-number">2487</span>.<span class="hljs-number">86</span> <span class="hljs-number">3393</span>.<span class="hljs-number">5</span> <span class="hljs-number">622</span>.<span class="hljs-number">25</span><br><br><span class="hljs-symbol">Step:</span>  AIC<span class="hljs-number">=324</span>.<span class="hljs-number">51</span>               #去掉<span class="hljs-built_in">x1</span>*<span class="hljs-built_in">x2</span>项的AIC<br>y ~ <span class="hljs-built_in">x1</span> + <span class="hljs-built_in">x2</span> + <span class="hljs-built_in">x3</span> + <span class="hljs-built_in">x4</span><br><br>       Df Sum of Sq    RSS    AIC<br>               <span class="hljs-number">908</span>.<span class="hljs-number">8</span> <span class="hljs-number">324</span>.<span class="hljs-number">51</span><br>- <span class="hljs-built_in">x3</span>    <span class="hljs-number">1</span>     <span class="hljs-number">77</span>.<span class="hljs-number">03</span>  <span class="hljs-number">985</span>.<span class="hljs-number">9</span> <span class="hljs-number">340</span>.<span class="hljs-number">90</span><br>- <span class="hljs-built_in">x2</span>    <span class="hljs-number">1</span>    <span class="hljs-number">109</span>.<span class="hljs-number">37</span> <span class="hljs-number">1018</span>.<span class="hljs-number">2</span> <span class="hljs-number">348</span>.<span class="hljs-number">19</span><br>- <span class="hljs-built_in">x1</span>    <span class="hljs-number">1</span>    <span class="hljs-number">249</span>.<span class="hljs-number">90</span> <span class="hljs-number">1158</span>.<span class="hljs-number">8</span> <span class="hljs-number">377</span>.<span class="hljs-number">41</span><br>- <span class="hljs-built_in">x4</span>    <span class="hljs-number">1</span>   <span class="hljs-number">2490</span>.<span class="hljs-number">56</span> <span class="hljs-number">3399</span>.<span class="hljs-number">4</span> <span class="hljs-number">620</span>.<span class="hljs-number">65</span><br><br><span class="hljs-symbol">Call:</span><br><span class="hljs-symbol">lm</span>(formula = y ~ <span class="hljs-built_in">x1</span> + <span class="hljs-built_in">x2</span> + <span class="hljs-built_in">x3</span> + <span class="hljs-built_in">x4</span>, <span class="hljs-meta">data</span> = df)<br><br><span class="hljs-symbol">Coefficients:</span><br>(Intercept)           <span class="hljs-built_in">x1</span>           <span class="hljs-built_in">x2</span>           <span class="hljs-built_in">x3</span>           <span class="hljs-built_in">x4</span>  <br>   <span class="hljs-number">212</span>.<span class="hljs-number">8780</span>       <span class="hljs-number">0</span>.<span class="hljs-number">8542</span>       <span class="hljs-number">0</span>.<span class="hljs-number">6672</span>      -<span class="hljs-number">0</span>.<span class="hljs-number">6674</span>       <span class="hljs-number">0</span>.<span class="hljs-number">4821</span>  <br></code></pre></td></tr></table></figure><p>通过AIC的判断，去掉X1*X2项后AIC最小，最后的检验结果告诉我们，还是原初的模型是最好的。</p><h2 id="4-案例黑色系期货日k线数据验证"><a class="markdownIt-Anchor" href="#4-案例黑色系期货日k线数据验证"></a> 4. 案例：黑色系期货日K线数据验证</h2><p>最后，我们用上面5个期货合约的日K线数据测试一下，找到多元回归关系。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">&gt;</span> <span class="hljs-string">lm9&lt;-lm(y~x1+x2+x3+x4,data=df)</span>  <span class="hljs-comment"># 日K线数据</span><br><span class="hljs-string">&gt;</span> <span class="hljs-string">summary(lm9)</span><br><br><span class="hljs-attr">Call:</span><br><span class="hljs-string">lm(formula</span> <span class="hljs-string">=</span> <span class="hljs-string">y</span> <span class="hljs-string">~</span> <span class="hljs-string">x1</span> <span class="hljs-string">+</span> <span class="hljs-string">x2</span> <span class="hljs-string">+</span> <span class="hljs-string">x3</span> <span class="hljs-string">+</span> <span class="hljs-string">x4,</span> <span class="hljs-string">data</span> <span class="hljs-string">=</span> <span class="hljs-string">df)</span><br><br><span class="hljs-attr">Residuals:</span><br>     <span class="hljs-string">Min</span>       <span class="hljs-string">1Q</span>   <span class="hljs-string">Median</span>       <span class="hljs-string">3Q</span>      <span class="hljs-string">Max</span> <br><span class="hljs-number">-173.338</span>  <span class="hljs-number">-37.470</span>    <span class="hljs-number">3.465</span>   <span class="hljs-number">32.158</span>  <span class="hljs-number">178.982</span> <br><br><span class="hljs-attr">Coefficients:</span><br>             <span class="hljs-string">Estimate</span> <span class="hljs-string">Std.</span> <span class="hljs-string">Error</span> <span class="hljs-string">t</span> <span class="hljs-string">value</span> <span class="hljs-string">Pr(&gt;|t|)</span>    <br><span class="hljs-string">(Intercept)</span> <span class="hljs-number">386.33482</span>   <span class="hljs-number">31.07729</span>  <span class="hljs-number">12.431</span>  <span class="hljs-string">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-string">***</span><br><span class="hljs-string">x1</span>            <span class="hljs-number">0.75871</span>    <span class="hljs-number">0.07554</span>  <span class="hljs-number">10.045</span>  <span class="hljs-string">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-string">***</span><br><span class="hljs-string">x2</span>           <span class="hljs-number">-0.62907</span>    <span class="hljs-number">0.14715</span>  <span class="hljs-number">-4.275</span> <span class="hljs-number">2.24e-05</span> <span class="hljs-string">***</span><br><span class="hljs-string">x3</span>            <span class="hljs-number">1.16070</span>    <span class="hljs-number">0.05224</span>  <span class="hljs-number">22.219</span>  <span class="hljs-string">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-string">***</span><br><span class="hljs-string">x4</span>            <span class="hljs-number">0.46461</span>    <span class="hljs-number">0.02168</span>  <span class="hljs-number">21.427</span>  <span class="hljs-string">&lt;</span> <span class="hljs-number">2e-16</span> <span class="hljs-string">***</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">Signif. codes:</span>  <span class="hljs-number">0</span> <span class="hljs-string">‘***’</span> <span class="hljs-number">0.001</span> <span class="hljs-string">‘**’</span> <span class="hljs-number">0.01</span> <span class="hljs-string">‘*’</span> <span class="hljs-number">0.05</span> <span class="hljs-string">‘.’</span> <span class="hljs-number">0.1</span> <span class="hljs-string">‘</span> <span class="hljs-string">’</span> <span class="hljs-number">1</span><br><br><span class="hljs-attr">Residual standard error:</span> <span class="hljs-number">57.78</span> <span class="hljs-string">on</span> <span class="hljs-number">565</span> <span class="hljs-string">degrees</span> <span class="hljs-string">of</span> <span class="hljs-string">freedom</span><br><span class="hljs-attr">Multiple R-squared:</span>  <span class="hljs-number">0.9844</span><span class="hljs-string">,</span>	<span class="hljs-attr">Adjusted R-squared:</span>  <span class="hljs-number">0.9843</span> <br><span class="hljs-attr">F-statistic:</span>  <span class="hljs-number">8906 </span><span class="hljs-string">on</span> <span class="hljs-number">4</span> <span class="hljs-string">and</span> <span class="hljs-number">565</span> <span class="hljs-string">DF,</span>  <span class="hljs-attr">p-value:</span> <span class="hljs-string">&lt;</span> <span class="hljs-number">2.2e-16</span><br></code></pre></td></tr></table></figure><p>数据集的基本统计信息。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs R"><span class="hljs-operator">&gt;</span> summary<span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">)</span><br>     Index                           x1               x2       <br> Min.   <span class="hljs-operator">:</span><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">03</span><span class="hljs-operator">-</span><span class="hljs-number">21</span> <span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">00</span>   Min.   <span class="hljs-operator">:</span> <span class="hljs-number">606.5</span>   Min.   <span class="hljs-operator">:</span><span class="hljs-number">494.0</span>  <br> <span class="hljs-number">1</span>st Qu.<span class="hljs-operator">:</span><span class="hljs-number">2014</span><span class="hljs-operator">-</span><span class="hljs-number">10</span><span class="hljs-operator">-</span><span class="hljs-number">21</span> <span class="hljs-number">06</span><span class="hljs-operator">:</span><span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">00</span>   <span class="hljs-number">1</span>st Qu.<span class="hljs-operator">:</span> <span class="hljs-number">803.5</span>   <span class="hljs-number">1</span>st Qu.<span class="hljs-operator">:</span><span class="hljs-number">613.1</span>  <br> Median <span class="hljs-operator">:</span><span class="hljs-number">2015</span><span class="hljs-operator">-</span><span class="hljs-number">05</span><span class="hljs-operator">-</span><span class="hljs-number">20</span> <span class="hljs-number">12</span><span class="hljs-operator">:</span><span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">00</span>   Median <span class="hljs-operator">:</span> <span class="hljs-number">939.0</span>   Median <span class="hljs-operator">:</span><span class="hljs-number">705.8</span>  <br> Mean   <span class="hljs-operator">:</span><span class="hljs-number">2015</span><span class="hljs-operator">-</span><span class="hljs-number">05</span><span class="hljs-operator">-</span><span class="hljs-number">21</span> <span class="hljs-number">08</span><span class="hljs-operator">:</span><span class="hljs-number">02</span><span class="hljs-operator">:</span><span class="hljs-number">31</span>   Mean   <span class="hljs-operator">:</span> <span class="hljs-number">936.1</span>   Mean   <span class="hljs-operator">:</span><span class="hljs-number">695.3</span>  <br> <span class="hljs-number">3</span>rd Qu.<span class="hljs-operator">:</span><span class="hljs-number">2015</span><span class="hljs-operator">-</span><span class="hljs-number">12</span><span class="hljs-operator">-</span><span class="hljs-number">16</span> <span class="hljs-number">18</span><span class="hljs-operator">:</span><span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">00</span>   <span class="hljs-number">3</span>rd Qu.<span class="hljs-operator">:</span><span class="hljs-number">1075.0</span>   <span class="hljs-number">3</span>rd Qu.<span class="hljs-operator">:</span><span class="hljs-number">773.0</span>  <br> Max.   <span class="hljs-operator">:</span><span class="hljs-number">2016</span><span class="hljs-operator">-</span><span class="hljs-number">07</span><span class="hljs-operator">-</span><span class="hljs-number">25</span> <span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">00</span><span class="hljs-operator">:</span><span class="hljs-number">00</span>   Max.   <span class="hljs-operator">:</span><span class="hljs-number">1280.0</span>   Max.   <span class="hljs-operator">:</span><span class="hljs-number">898.0</span>  <br><br>       x3              x4             y       <br> Min.   <span class="hljs-operator">:</span><span class="hljs-number">284.0</span>   Min.   <span class="hljs-operator">:</span><span class="hljs-number">1691</span>   Min.   <span class="hljs-operator">:</span><span class="hljs-number">1626</span>  <br> <span class="hljs-number">1</span>st Qu.<span class="hljs-operator">:</span><span class="hljs-number">374.1</span>   <span class="hljs-number">1</span>st Qu.<span class="hljs-operator">:</span><span class="hljs-number">2084</span>   <span class="hljs-number">1</span>st Qu.<span class="hljs-operator">:</span><span class="hljs-number">2012</span>  <br> Median <span class="hljs-operator">:</span><span class="hljs-number">434.0</span>   Median <span class="hljs-operator">:</span><span class="hljs-number">2503</span>   Median <span class="hljs-operator">:</span><span class="hljs-number">2378</span>  <br> Mean   <span class="hljs-operator">:</span><span class="hljs-number">476.5</span>   Mean   <span class="hljs-operator">:</span><span class="hljs-number">2545</span>   Mean   <span class="hljs-operator">:</span><span class="hljs-number">2395</span>  <br> <span class="hljs-number">3</span>rd Qu.<span class="hljs-operator">:</span><span class="hljs-number">545.8</span>   <span class="hljs-number">3</span>rd Qu.<span class="hljs-operator">:</span><span class="hljs-number">2916</span>   <span class="hljs-number">3</span>rd Qu.<span class="hljs-operator">:</span><span class="hljs-number">2592</span>  <br> Max.   <span class="hljs-operator">:</span><span class="hljs-number">825.0</span>   Max.   <span class="hljs-operator">:</span><span class="hljs-number">3480</span>   Max.   <span class="hljs-operator">:</span><span class="hljs-number">3414</span>  <br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fulequn/oss_img/master/img231/202306241909601.png" srcset="/img/loading.gif" lazyload alt="5"></p><p>对于日K线数据，黑色系的5个品种，同样具有非常强的相关关系，那么我们就可以把这个结论应用到实际的交易中了。</p><p>本文通过多元回归的统计分析方法，介绍多元回归在金融市场的基本应用。我们通过建立因变量和多个自变量的模型，从而发现生活中更复杂的规律，并建立有效的验证指标。让我们我们的技术优势，去金融市场抢钱吧。</p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" class="category-chain-item">编程语言</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/R/" class="print-no-link">#R</a></div></div><div class="license-box my-3"><div class="license-title"><div>R语言解读多元线性回归模型</div><div>https://fulequn.github.io/2020/10/Article202010131/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Fulequn</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2020年10月13日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2020/10/Article202010132/" title="Unexpected UTF-8 BOM(decode using utf-8-sig)"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Unexpected UTF-8 BOM(decode using utf-8-sig)</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2020/10/Article202010084/" title="R做多元线性回归全攻略"><span class="hidden-mobile">R做多元线性回归全攻略</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>